<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZYLORB - World's First 4-Zone Social Media Platform</title>
    
    <!-- Tailwind CSS -->
   <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Custom Styles -->
    <style>
        /* Custom Animations */
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 20px rgba(139, 92, 246, 0.5); }
            50% { box-shadow: 0 0 40px rgba(139, 92, 246, 0.8); }
        }
        
        @keyframes slideIn {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .animate-float {
            animation: float 3s ease-in-out infinite;
        }
        
        .animate-glow {
            animation: glow 2s ease-in-out infinite;
        }
        
        .animate-slide-in {
            animation: slideIn 0.5s ease-out;
        }
        
        .animate-fade-in {
            animation: fadeIn 0.3s ease-out;
        }
        
        .animate-pulse-soft {
            animation: pulse 2s ease-in-out infinite;
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #7c3aed, #db2777);
        }
        
        /* Glass Morphism Effect */
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .glass-dark {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* Gradient Text */
        .gradient-text {
            background: linear-gradient(135deg, #8b5cf6 0%, #ec4899 50%, #3b82f6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        /* Button Styles */
        .btn-primary {
            background: linear-gradient(135deg, #8b5cf6 0%, #ec4899 100%);
            color: white;
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(139, 92, 246, 0.4);
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: 600;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
            cursor: pointer;
        }
        
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-1px);
        }
        
        /* Zone Specific Colors */
        .zone-gaming {
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
        }
        
        .zone-life {
            background: linear-gradient(135deg, #ec4899 0%, #db2777 100%);
        }
        
        .zone-culture {
            background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%);
        }
        
        .zone-professional {
            background: linear-gradient(135deg, #f59e0b 0%, #ef4444 100%);
        }
        
        /* Card Hover Effects */
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }
        
        /* Loading Animation */
        .loading-dots {
            display: inline-block;
            position: relative;
            width: 80px;
            height: 80px;
        }
        
        .loading-dots div {
            position: absolute;
            top: 33px;
            width: 13px;
            height: 13px;
            border-radius: 50%;
            background: #fff;
            animation-timing-function: cubic-bezier(0, 1, 1, 0);
        }
        
        .loading-dots div:nth-child(1) {
            left: 8px;
            animation: loading-dots1 0.6s infinite;
        }
        
        .loading-dots div:nth-child(2) {
            left: 8px;
            animation: loading-dots2 0.6s infinite;
        }
        
        .loading-dots div:nth-child(3) {
            left: 32px;
            animation: loading-dots2 0.6s infinite;
        }
        
        .loading-dots div:nth-child(4) {
            left: 56px;
            animation: loading-dots3 0.6s infinite;
        }
        
        @keyframes loading-dots1 {
            0% { transform: scale(0); }
            100% { transform: scale(1); }
        }
        
        @keyframes loading-dots3 {
            0% { transform: scale(1); }
            100% { transform: scale(0); }
        }
        
        @keyframes loading-dots2 {
            0% { transform: translate(0, 0); }
            100% { transform: translate(24px, 0); }
        }
        
        /* Floating Elements */
        .floating {
            animation: float 6s ease-in-out infinite;
        }
        
        /* Shine Effect */
        .shine {
            position: relative;
            overflow: hidden;
        }
        
        .shine::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: 0.5s;
        }
        
        .shine:hover::before {
            left: 100%;
        }
        
        /* Custom Checkbox */
        .custom-checkbox {
            appearance: none;
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 4px;
            background: transparent;
            cursor: pointer;
            position: relative;
        }
        
        .custom-checkbox:checked {
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            border-color: #8b5cf6;
        }
        
        .custom-checkbox:checked::after {
            content: 'âœ“';
            position: absolute;
            color: white;
            font-size: 14px;
            font-weight: bold;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        
        /* Progress Bar */
        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            border-radius: 3px;
            transition: width 0.3s ease;
        }
        
        /* Notification Badge */
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ef4444;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        /* Tooltip */
        .tooltip {
            position: relative;
        }
        
        .tooltip::before {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        
        .tooltip:hover::before {
            opacity: 1;
        }
        
        /* Wave Animation */
        .wave {
            position: relative;
        }
        
        .wave::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 320'%3E%3Cpath fill='%238b5cf6' fill-opacity='0.1' d='M0,96L48,112C96,128,192,160,288,186.7C384,213,480,235,576,213.3C672,192,768,128,864,128C960,128,1056,192,1152,192C1248,192,1344,128,1392,96L1440,64L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z'%3E%3C/path%3E%3C/svg%3E");
            background-size: cover;
            animation: wave 10s linear infinite;
        }
        
        @keyframes wave {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }
        
        /* Zone Page Styles */
        .zone-header {
            padding: 20px 0;
            background: rgba(0, 0, 0, 0.3);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .post-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .post-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .post-action {
            display: flex;
            align-items: center;
            gap: 8px;
            color: rgba(255, 255, 255, 0.7);
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .post-action:hover {
            color: white;
        }
        
        .post-action.active {
            color: #ec4899;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
        }
        
        .create-post-box {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .post-input {
            width: 100%;
            background: transparent;
            border: none;
            color: white;
            font-size: 16px;
            resize: none;
            outline: none;
            min-height: 80px;
        }
        
        .post-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        
        .post-options {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
        }
        
        .option-button {
            display: flex;
            align-items: center;
            gap: 8px;
            color: rgba(255, 255, 255, 0.7);
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .option-button:hover {
            color: white;
        }
        
        /* Media Preview */
        .media-preview {
            margin-top: 15px;
            border-radius: 12px;
            overflow: hidden;
            position: relative;
        }
        
        .media-preview img, .media-preview video {
            width: 100%;
            max-height: 400px;
            object-fit: contain;
            background: #000;
        }
        
        .remove-media {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        /* Comments Section */
        .comments-section {
            margin-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding-top: 15px;
        }
        
        .comment {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .comment-input {
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 10px 15px;
            color: white;
            outline: none;
        }
        
        .comment-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        
        /* Stories Section */
        .stories-container {
            display: flex;
            gap: 15px;
            padding: 15px 0;
            overflow-x: auto;
            margin-bottom: 20px;
        }
        
        .story {
            flex: 0 0 auto;
            width: 80px;
            text-align: center;
            cursor: pointer;
        }
        
        .story-avatar {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            margin: 0 auto 5px;
            position: relative;
            border: 3px solid transparent;
            background-clip: padding-box;
        }
        
        .story-avatar.has-story::after {
            content: '';
            position: absolute;
            top: -3px;
            left: -3px;
            right: -3px;
            bottom: -3px;
            border-radius: 50%;
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            z-index: -1;
        }
        
        .story-username {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        /* Story Viewer */
        .story-viewer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 100;
            display: none;
            align-items: center;
            justify-content: center;
        }
        
        .story-content {
            max-width: 400px;
            max-height: 80%;
            border-radius: 16px;
            overflow: hidden;
            position: relative;
        }
        
        .story-progress {
            display: flex;
            gap: 5px;
            position: absolute;
            top: 15px;
            left: 15px;
            right: 15px;
        }
        
        .story-progress-bar {
            flex: 1;
            height: 3px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 2px;
            overflow: hidden;
        }
        
        .story-progress-fill {
            height: 100%;
            background: white;
            width: 0%;
            transition: width 0.1s linear;
        }
        
        /* Share Modal */
        .share-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 100;
            display: none;
            align-items: center;
            justify-content: center;
        }
        
        .share-content {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 16px;
            padding: 20px;
            max-width: 500px;
            width: 90%;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        /* File Input Styling */
        .file-input {
            display: none;
        }
        
        .file-input-label {
            cursor: pointer;
        }
        
        /* Profile Page */
        .profile-page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 100;
            display: none;
            align-items: center;
            justify-content: center;
            overflow-y: auto;
        }
        
        .profile-content {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 16px;
            padding: 30px;
            max-width: 800px;
            width: 90%;
            max-height: 90%;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .profile-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .profile-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 36px;
            margin: 0 auto 15px;
        }
        
        .profile-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .stat-item {
            text-align: center;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
        }
        
        .stat-number {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.7);
        }
        
        .profile-posts {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .profile-post {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            overflow: hidden;
            cursor: pointer;
            position: relative;
        }
        
        .profile-post img, .profile-post video {
            width: 100%;
            height: 150px;
            object-fit: cover;
        }
        
        .profile-post-text {
            padding: 10px;
            font-size: 14px;
        }
        
        .profile-post-zone {
            position: absolute;
            top: 5px;
            left: 5px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 10px;
        }
        
        /* Story Creation Modal */
        .story-creation-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 100;
            display: none;
            align-items: center;
            justify-content: center;
        }
        
        .story-creation-content {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 16px;
            padding: 20px;
            max-width: 500px;
            width: 90%;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        /* Real-time Notification */
        .real-time-notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 12px;
            padding: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: none;
            align-items: center;
            gap: 10px;
            z-index: 90;
        }
        
        /* Chat System */
        .chat-system {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 350px;
            height: 500px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: none;
            flex-direction: column;
            z-index: 90;
        }
        
        .chat-header {
            padding: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .chat-messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .message {
            max-width: 80%;
            padding: 10px 15px;
            border-radius: 18px;
            font-size: 14px;
        }
        
        .message.sent {
            align-self: flex-end;
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            color: white;
        }
        
        .message.received {
            align-self: flex-start;
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }
        
        .chat-input-container {
            padding: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            gap: 10px;
        }
        
        .chat-input {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 10px 15px;
            color: white;
            outline: none;
        }
        
        /* Live Stream System */
        .live-stream-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 100;
            display: none;
            align-items: center;
            justify-content: center;
        }
        
        .live-stream-content {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 16px;
            padding: 20px;
            max-width: 800px;
            width: 90%;
            max-height: 90%;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .live-stream-video {
            width: 100%;
            height: 400px;
            background: #000;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            margin-bottom: 20px;
        }
        
        .live-indicator {
            display: flex;
            align-items: center;
            gap: 5px;
            color: #ef4444;
            font-weight: bold;
        }
        
        .live-indicator::before {
            content: '';
            width: 8px;
            height: 8px;
            background: #ef4444;
            border-radius: 50%;
            animation: pulse 1s infinite;
        }
        
        /* Reels System */
        .reels-section {
            margin-bottom: 20px;
        }
        
        .reels-container {
            display: flex;
            gap: 15px;
            padding: 15px 0;
            overflow-x: auto;
        }
        
        .reel {
            flex: 0 0 auto;
            width: 120px;
            text-align: center;
            cursor: pointer;
        }
        
        .reel-video {
            width: 120px;
            height: 200px;
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            background: #000;
        }
        
        .reel-video video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .reel-username {
            margin-top: 5px;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
        }
        
        /* User Menu */
        .user-menu {
            position: absolute;
            top: 70px;
            right: 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 12px;
            padding: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: none;
            flex-direction: column;
            gap: 5px;
            z-index: 90;
        }
        
        .user-menu-item {
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.2s ease;
        }
        
        .user-menu-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .post-options {
                flex-direction: column;
                gap: 10px;
            }
            
            .post-options > div {
                justify-content: center;
            }
            
            .profile-stats {
                grid-template-columns: 1fr;
            }
            
            .profile-posts {
                grid-template-columns: 1fr;
            }
            
            .chat-system {
                width: 300px;
                height: 400px;
            }
        }
       /* ==================== REAL-TIME FEATURES CSS ==================== */

/* Real-time Features CSS */
.reel-action-btn {
    display: flex;
    flex-direction: column;
    align-items: center;
    color: #fff;
    gap: 0.25rem;
}

.live-reaction-btn {
    background-color: rgba(255,255,255,0.2);
    backdrop-filter: blur(8px);
    border-radius: 9999px;
    width: 3rem;
    height: 3rem;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.25rem;
    transition: transform 0.2s;
}

.live-reaction-btn:hover {
    transform: scale(1.1);
}

.reaction-animation {
    animation: floatUp 3s ease-in-out forwards;
}

@keyframes floatUp {
    0% {
        transform: translateY(0) scale(1);
        opacity: 1;
    }
    100% {
        transform: translateY(-100px) scale(0.5);
        opacity: 0;
    }
}

.switch {
    position: relative;
    display: inline-block;
    width: 50px;
    height: 24px;
}

.switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #ccc;
    transition: .4s;
    border-radius: 24px;
}

.slider:before {
    position: absolute;
    content: "";
    height: 16px;
    width: 16px;
    left: 4px;
    bottom: 4px;
    background-color: white;
    transition: .4s;
    border-radius: 50%;
}

input:checked + .slider {
    background-color: #8b5cf6;
}

input:checked + .slider:before {
    transform: translateX(26px);
}

/* Improved input styles */
input:focus, textarea:focus {
    backdrop-filter: blur(10px);
    background: rgba(255, 255, 255, 0.15) !important;
}

/* Instagram Reels Styles */
.reel-video {
    transition: transform 0.3s ease;
}

.reel-video:hover {
    transform: scale(1.02);
}

/* TikTok Live Styles */
.live-indicator {
    display: flex;
    align-items: center;
    gap: 5px;
    color: #ef4444;
    font-weight: bold;
}

.live-indicator::before {
    content: '';
    width: 8px;
    height: 8px;
    background: #ef4444;
    border-radius: 50%;
    animation: pulse 1s infinite;
}

/* Profile Settings Styles */
.profile-avatar {
    transition: transform 0.3s ease;
}

.profile-avatar:hover {
    transform: scale(1.05);
}

/* Zone Experience Styles */
.zone-world {
    background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255,255,255,0.2);
}

/* Enhanced Form Styles */
.form-input-enhanced {
    background: rgba(255, 255, 255, 0.15) !important;
    backdrop-filter: blur(15px);
    border: 2px solid rgba(255, 255, 255, 0.3) !important;
    transition: all 0.3s ease;
}

.form-input-enhanced:focus {
    background: rgba(255, 255, 255, 0.25) !important;
    border-color: #8b5cf6 !important;
    box-shadow: 0 0 20px rgba(139, 92, 246, 0.3);
}

/* Real-time Notification Styles */
.real-time-notification {
    animation: slideInRight 0.5s ease-out;
}

@keyframes slideInRight {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

/* Enhanced Button Styles */
.btn-enhanced {
    background: linear-gradient(135deg, #8b5cf6 0%, #ec4899 100%);
    color: white;
    padding: 12px 24px;
    border-radius: 12px;
    font-weight: 600;
    transition: all 0.3s ease;
    border: none;
    cursor: pointer;
    position: relative;
    overflow: hidden;
}

.btn-enhanced::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    transition: 0.5s;
}

.btn-enhanced:hover::before {
    left: 100%;
}

.btn-enhanced:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 25px rgba(139, 92, 246, 0.4);
}

/* ==================== END REAL-TIME FEATURES CSS ==================== */
    </style>
</head>
<body class="bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 min-h-screen text-white">
    <!-- Loading Screen -->
    <div id="loading-screen" class="fixed inset-0 bg-gradient-to-br from-purple-900 to-indigo-900 flex items-center justify-center z-50">
        <div class="text-center">
            <div class="loading-dots mb-4">
                <div></div>
                <div></div>
                <div></div>
                <div></div>
            </div>
            <h1 class="text-4xl font-bold mb-2 gradient-text">ZYLORB</h1>
            <p class="text-white/60">Loading your social universe...</p>
            <div class="mt-4 progress-bar">
                <div class="progress-fill" style="width: 0%" id="loading-progress"></div>
            </div>
        </div>
    </div>

    <!-- Real-time Notification -->
    <div id="real-time-notification" class="real-time-notification">
        <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse-soft"></div>
        <div class="text-white font-medium" id="notification-text">New activity in your network</div>
    </div>

    <!-- Chat System -->
    <div id="chat-system" class="chat-system">
        <div class="chat-header">
            <div class="flex items-center gap-3">
                <div class="user-avatar bg-gradient-to-r from-green-500 to-blue-500" id="chat-user-avatar">U</div>
                <div>
                    <div class="font-semibold" id="chat-username">User Name</div>
                    <div class="text-white/60 text-sm">Online</div>
                </div>
            </div>
            <button class="text-white/60 hover:text-white" onclick="hideChat()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="chat-messages" id="chat-messages">
            <!-- Messages will be added here -->
        </div>
        <div class="chat-input-container">
            <input type="text" class="chat-input" placeholder="Type a message..." id="chat-input">
            <button class="btn-primary" onclick="sendMessage()">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
    </div>

    <!-- Header/Navigation -->
    <header class="glass-dark sticky top-0 z-40 border-b border-white/10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <!-- Logo -->
                <div class="flex items-center space-x-3 cursor-pointer" onclick="showHomePage()">
                    <div class="w-10 h-10 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center animate-glow">
                        <span class="text-white font-bold text-lg">Z</span>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold gradient-text">ZYLORB</h1>
                        <p class="text-white/60 text-xs">v2.1.0</p>
                    </div>
                </div>

                <!-- Desktop Navigation -->
                <nav class="hidden md:flex items-center space-x-8">
                    <a href="#features" class="text-white/80 hover:text-white transition-colors font-medium">Features</a>
                    <a href="#zones" class="text-white/80 hover:text-white transition-colors font-medium">Zones</a>
                    <a href="#community" class="text-white/80 hover:text-white transition-colors font-medium">Community</a>
                    <a href="#about" class="text-white/80 hover:text-white transition-colors font-medium">About</a>
                </nav>

                <!-- Auth Buttons -->
                <div class="flex items-center space-x-3" id="auth-buttons">
                    <button class="btn-secondary" onclick="showAuthModal('signin')">
                        <i class="fas fa-sign-in-alt mr-2"></i>Sign In
                    </button>
                    <button class="btn-primary" onclick="showAuthModal('signup')">
                        <i class="fas fa-user-plus mr-2"></i>Join Now
                    </button>
                </div>

                <!-- User Profile -->
                <div class="hidden items-center space-x-4" id="user-profile">
                    <div class="flex items-center space-x-3">
                        <div class="relative">
                            <div class="user-avatar bg-gradient-to-r from-green-500 to-blue-500 cursor-pointer tooltip" data-tooltip="Your Profile" onclick="toggleUserMenu()" id="header-user-avatar">
                                <span class="text-white font-bold" id="header-user-initial">U</span>
                            </div>
                            <div class="notification-badge" id="header-notification-count">3</div>
                        </div>
                        <span class="text-white font-semibold cursor-pointer" id="header-username" onclick="showProfilePage()">User</span>
                    </div>
                    <button class="btn-secondary" onclick="showChat()">
                        <i class="fas fa-comments mr-2"></i>Chat
                    </button>
                    <button class="btn-secondary" onclick="showLiveStreamModal()">
                        <i class="fas fa-broadcast-tower mr-2"></i>Go Live
                    </button>
                </div>

                <!-- User Menu -->
                <div id="user-menu" class="user-menu">
                    <div class="user-menu-item" onclick="showProfilePage()">
                        <i class="fas fa-user mr-2"></i>My Profile
                    </div>
                    <div class="user-menu-item" onclick="showSettings()">
                        <i class="fas fa-cog mr-2"></i>Settings
                    </div>
                    <div class="user-menu-item" onclick="showChat()">
                        <i class="fas fa-comments mr-2"></i>Messages
                    </div>
                    <div class="user-menu-item" onclick="logout()">
                        <i class="fas fa-sign-out-alt mr-2"></i>Logout
                    </div>
                </div>

                <!-- Mobile Menu Button -->
                <button class="md:hidden text-white p-2" onclick="toggleMobileMenu()">
                    <i class="fas fa-bars text-xl"></i>
                </button>
            </div>

            <!-- Mobile Menu -->
            <div id="mobile-menu" class="hidden md:hidden py-4 border-t border-white/10">
                <div class="flex flex-col space-y-4">
                    <a href="#features" class="text-white/80 hover:text-white transition-colors">Features</a>
                    <a href="#zones" class="text-white/80 hover:text-white transition-colors">Zones</a>
                    <a href="#community" class="text-white/80 hover:text-white transition-colors">Community</a>
                    <a href="#about" class="text-white/80 hover:text-white transition-colors">About</a>
                    <div class="pt-4 border-t border-white/10">
                        <button class="btn-secondary w-full mb-2" onclick="showAuthModal('signin')">Sign In</button>
                        <button class="btn-primary w-full" onclick="showAuthModal('signup')">Join Now</button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main id="main-content">
        <!-- Hero Section -->
        <section class="relative py-20 px-4 sm:px-6 lg:px-8 overflow-hidden">
            <div class="wave"></div>
            <div class="max-w-7xl mx-auto text-center relative z-10">
                <div class="animate-float">
                    <h1 class="text-6xl md:text-8xl font-bold mb-6 gradient-text">
                        ZYLORB
                    </h1>
                </div>
                <p class="text-2xl md:text-3xl text-white/80 mb-8 max-w-4xl mx-auto leading-relaxed">
                    Your World, Four Zones. Connect, Share, and Discover in the World's First Multi-Dimensional Social Platform
                </p>
                <p class="text-lg text-white/60 mb-12 max-w-2xl mx-auto">
                    Join millions of users sharing gaming highlights, daily moments, cultural experiences, and professional insights across four distinct zones
                </p>
                
                <!-- CTA Buttons -->
                <div class="flex flex-col sm:flex-row gap-4 justify-center items-center mb-16">
                    <button class="btn-primary text-lg px-8 py-4 text-xl font-bold shine" onclick="showAuthModal('signup')">
                        <i class="fas fa-rocket mr-2"></i>Start Your Journey
                    </button>
                    <button class="btn-secondary text-lg px-8 py-4" onclick="scrollToFeatures()">
                        <i class="fas fa-play-circle mr-2"></i>Watch Demo
                    </button>
                </div>

                <!-- Live Stats -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-6 max-w-2xl mx-auto">
                    <div class="glass rounded-2xl p-6 text-center card-hover">
                        <div class="text-3xl font-bold text-white mb-2" id="total-users">2.5M+</div>
                        <div class="text-white/60">Active Users</div>
                    </div>
                    <div class="glass rounded-2xl p-6 text-center card-hover">
                        <div class="text-3xl font-bold text-white mb-2" id="total-posts">15.8M+</div>
                        <div class="text-white/60">Total Posts</div>
                    </div>
                    <div class="glass rounded-2xl p-6 text-center card-hover">
                        <div class="text-3xl font-bold text-white mb-2" id="online-now">124K+</div>
                        <div class="text-white/60">Online Now</div>
                    </div>
                    <div class="glass rounded-2xl p-6 text-center card-hover">
                        <div class="text-3xl font-bold text-white mb-2" id="countries">190+</div>
                        <div class="text-white/60">Countries</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section id="features" class="py-20 px-4 sm:px-6 lg:px-8 bg-black/20">
            <div class="max-w-7xl mx-auto">
                <div class="text-center mb-16">
                    <h2 class="text-4xl md:text-5xl font-bold mb-4 gradient-text">Why ZYLORB Stands Out</h2>
                    <p class="text-xl text-white/80 max-w-3xl mx-auto">Experience social media like never before with our innovative zone-based platform</p>
                </div>

                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Feature 1 -->
                    <div class="glass rounded-2xl p-8 card-hover">
                        <div class="w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center mb-6">
                            <i class="fas fa-layer-group text-2xl text-white"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-white mb-4">Four Distinct Zones</h3>
                        <p class="text-white/80 leading-relaxed">
                            Separate spaces for Gaming, Daily Life, Culture, and Professional content. Keep your interests organized and discover like-minded people.
                        </p>
                    </div>

                    <!-- Feature 2 -->
                    <div class="glass rounded-2xl p-8 card-hover">
                        <div class="w-16 h-16 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-2xl flex items-center justify-center mb-6">
                            <i class="fas fa-bolt text-2xl text-white"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-white mb-4">Real-time Interactions</h3>
                        <p class="text-white/80 leading-relaxed">
                            Live streaming, instant messaging, and real-time notifications. Stay connected with your community across all zones.
                        </p>
                    </div>

                    <!-- Feature 3 -->
                    <div class="glass rounded-2xl p-8 card-hover">
                        <div class="w-16 h-16 bg-gradient-to-r from-green-500 to-teal-500 rounded-2xl flex items-center justify-center mb-6">
                            <i class="fas fa-shield-alt text-2xl text-white"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-white mb-4">Advanced Privacy</h3>
                        <p class="text-white/80 leading-relaxed">
                            Zone-specific privacy settings, content moderation, and AI-powered safety features to protect your digital experience.
                        </p>
                    </div>

                    <!-- Feature 4 -->
                    <div class="glass rounded-2xl p-8 card-hover">
                        <div class="w-16 h-16 bg-gradient-to-r from-orange-500 to-red-500 rounded-2xl flex items-center justify-center mb-6">
                            <i class="fas fa-robot text-2xl text-white"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-white mb-4">AI-Powered Discovery</h3>
                        <p class="text-white/80 leading-relaxed">
                            Smart algorithms that understand your interests across different zones and recommend relevant content and connections.
                        </p>
                    </div>

                    <!-- Feature 5 -->
                    <div class="glass rounded-2xl p-8 card-hover">
                        <div class="w-16 h-16 bg-gradient-to-r from-purple-500 to-indigo-500 rounded-2xl flex items-center justify-center mb-6">
                            <i class="fas fa-video text-2xl text-white"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-white mb-4">Multi-Format Content</h3>
                        <p class="text-white/80 leading-relaxed">
                            Support for images, videos, live streams, stories, and interactive posts. Express yourself in any format you prefer.
                        </p>
                    </div>

                    <!-- Feature 6 -->
                    <div class="glass rounded-2xl p-8 card-hover">
                        <div class="w-16 h-16 bg-gradient-to-r from-pink-500 to-rose-500 rounded-2xl flex items-center justify-center mb-6">
                            <i class="fas fa-globe text-2xl text-white"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-white mb-4">Global Community</h3>
                        <p class="text-white/80 leading-relaxed">
                            Connect with users from 190+ countries. Share cultural experiences and learn from diverse perspectives worldwide.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Zones Section -->
        <section id="zones" class="py-20 px-4 sm:px-6 lg:px-8">
            <div class="max-w-7xl mx-auto">
                <div class="text-center mb-16">
                    <h2 class="text-4xl md:text-5xl font-bold mb-4 gradient-text">Explore The Four Zones</h2>
                    <p class="text-xl text-white/80 max-w-3xl mx-auto">Each zone offers unique experiences and communities tailored to different aspects of life</p>
                </div>

                <div class="grid lg:grid-cols-2 gap-8 mb-16">
                    <!-- Gaming Zone -->
                    <div class="zone-gaming rounded-3xl p-8 card-hover relative overflow-hidden">
                        <div class="absolute top-4 right-4">
                            <span class="bg-white/20 text-white px-3 py-1 rounded-full text-sm font-medium">2.1M Users</span>
                        </div>
                        <div class="flex items-start space-x-6">
                            <div class="w-20 h-20 bg-white/20 rounded-2xl flex items-center justify-center">
                                <span class="text-3xl">ðŸŽ®</span>
                            </div>
                            <div class="flex-1">
                                <h3 class="text-3xl font-bold text-white mb-4">Gaming Zone</h3>
                                <p class="text-white/90 text-lg mb-6 leading-relaxed">
                                    Share epic gaming moments, live streams, tournament highlights, and connect with fellow gamers worldwide. From casual mobile games to professional eSports.
                                </p>
                                <div class="flex flex-wrap gap-2 mb-6">
                                    <span class="bg-white/20 text-white px-3 py-1 rounded-full text-sm">Live Streams</span>
                                    <span class="bg-white/20 text-white px-3 py-1 rounded-full text-sm">Tournaments</span>
                                    <span class="bg-white/20 text-white px-3 py-1 rounded-full text-sm">Game Clips</span>
                                    <span class="bg-white/20 text-white px-3 py-1 rounded-full text-sm">Community Events</span>
                                </div>
                                <button class="btn-primary" onclick="enterZone('gaming')">
                                    <i class="fas fa-gamepad mr-2"></i>Enter Gaming Zone
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Life Zone -->
                    <div class="zone-life rounded-3xl p-8 card-hover relative overflow-hidden">
                        <div class="absolute top-4 right-4">
                            <span class="bg-white/20 text-white px-3 py-1 rounded-full text-sm font-medium">1.8M Users</span>
                        </div>
                        <div class="flex items-start space-x-6">
                            <div class="w-20 h-20 bg-white/20 rounded-2xl flex items-center justify-center">
                                <span class="text-3xl">ðŸ‘¤</span>
                            </div>
                            <div class="flex-1">
                                <h3 class="text-3xl font-bold text-white mb-4">Daily Life Zone</h3>
                                <p class="text-white/90 text-lg mb-6 leading-relaxed">
                                    Share your everyday moments, personal stories, creative projects, and life updates. A space for authentic connections and personal expression.
                                </p>
                                <div class="flex flex-wrap gap-2 mb-6">
                                    <span class="bg-white/20 text-white px-3 py-1 rounded-full text-sm">Daily Vlogs</span>
                                    <span class="bg-white/20 text-white px-3 py-1 rounded-full text-sm">Personal Stories</span>
                                    <span class="bg-white/20 text-white px-3 py-1 rounded-full text-sm">Creative Work</span>
                                    <span class="bg-white/20 text-white px-3 py-1 rounded-full text-sm">Life Updates</span>
                                </div>
                                <button class="btn-primary" onclick="enterZone('life')">
                                    <i class="fas fa-user mr-2"></i>Enter Life Zone
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Culture Zone -->
                    <div class="zone-culture rounded-3xl p-8 card-hover relative overflow-hidden">
                        <div class="absolute top-4 right-4">
                            <span class="bg-white/20 text-white px-3 py-1 rounded-full text-sm font-medium">1.2M Users</span>
                        </div>
                        <div class="flex items-start space-x-6">
                            <div class="w-20 h-20 bg-white/20 rounded-2xl flex items-center justify-center">
                                <span class="text-3xl">ðŸŽ­</span>
                            </div>
                            <div class="flex-1">
                                <h3 class="text-3xl font-bold text-white mb-4">Culture Zone</h3>
                                <p class="text-white/90 text-lg mb-6 leading-relaxed">
                                    Celebrate cultural diversity, share traditions, festivals, art, music, and connect with people from different backgrounds and heritage.
                                </p>
                                <div class="flex flex-wrap gap-2 mb-6">
                                    <span class="bg-white/20 text-white px-3 py-1 rounded-full text-sm">Festivals</span>
                                    <span class="bg-white/20 text-white px-3 py-1 rounded-full text-sm">Traditional Arts</span>
                                    <span class="bg-white/20 text-white px-3 py-1 rounded-full text-sm">Cultural Events</span>
                                    <span class="bg-white/20 text-white px-3 py-1 rounded-full text-sm">Global Traditions</span>
                                </div>
                                <button class="btn-primary" onclick="enterZone('culture')">
                                    <i class="fas fa-globe-americas mr-2"></i>Enter Culture Zone
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Professional Zone -->
                    <div class="zone-professional rounded-3xl p-8 card-hover relative overflow-hidden">
                        <div class="absolute top-4 right-4">
                            <span class="bg-white/20 text-white px-3 py-1 rounded-full text-sm font-medium">950K Users</span>
                        </div>
                        <div class="flex items-start space-x-6">
                            <div class="w-20 h-20 bg-white/20 rounded-2xl flex items-center justify-center">
                                <span class="text-3xl">ðŸ’¼</span>
                            </div>
                            <div class="flex-1">
                                <h3 class="text-3xl font-bold text-white mb-4">Professional Zone</h3>
                                <p class="text-white/90 text-lg mb-6 leading-relaxed">
                                    Network with professionals, share industry insights, career advice, business opportunities, and collaborate on projects across various fields.
                                </p>
                                <div class="flex flex-wrap gap-2 mb-6">
                                    <span class="bg-white/20 text-white px-3 py-1 rounded-full text-sm">Career Networking</span>
                                    <span class="bg-white/20 text-white px-3 py-1 rounded-full text-sm">Industry Insights</span>
                                    <span class="bg-white/20 text-white px-3 py-1 rounded-full text-sm">Professional Development</span>
                                    <span class="bg-white/20 text-white px-3 py-1 rounded-full text-sm">Business Collaboration</span>
                                </div>
                                <button class="btn-primary" onclick="enterZone('professional')">
                                    <i class="fas fa-briefcase mr-2"></i>Enter Professional Zone
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- CTA Section -->
        <section class="py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-r from-purple-600/20 to-pink-600/20">
            <div class="max-w-4xl mx-auto text-center">
                <h2 class="text-4xl md:text-5xl font-bold mb-6 gradient-text">Ready to Join ZYLORB?</h2>
                <p class="text-xl text-white/80 mb-8 max-w-2xl mx-auto">
                    Become part of the world's most innovative social platform. Connect with millions across four amazing zones.
                </p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <button class="btn-primary text-lg px-8 py-4 text-xl font-bold" onclick="showAuthModal('signup')">
                        <i class="fas fa-rocket mr-2"></i>Create Your Account
                    </button>
                    <button class="btn-secondary text-lg px-8 py-4" onclick="scrollToFeatures()">
                        <i class="fas fa-info-circle mr-2"></i>Learn More
                    </button>
                </div>
                <p class="text-white/60 mt-6 text-sm">
                    Join 2.5M+ users worldwide â€¢ Free forever â€¢ No credit card required
                </p>
            </div>
        </section>
    </main>

    <!-- REAL ZONE PAGES -->
    <!-- Gaming Zone Page -->
    <div id="gaming-zone-page" class="hidden fixed inset-0 bg-gradient-to-br from-purple-900 to-indigo-900 z-50 overflow-y-auto">
        <div class="min-h-screen">
            <!-- Zone Header -->
            <div class="zone-header">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-4">
                            <button class="btn-secondary" onclick="showHomePage()">
                                <i class="fas fa-arrow-left mr-2"></i>Back
                            </button>
                            <div>
                                <h1 class="text-3xl font-bold text-white">Gaming Zone</h1>
                                <p class="text-white/60">Share and discover gaming content</p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-4">
                            <button class="btn-primary" onclick="showCreatePostModal('gaming')">
                                <i class="fas fa-plus mr-2"></i>New Post
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Zone Content -->
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                <!-- Reels Section -->
                <div class="reels-section">
                    <h2 class="text-2xl font-bold text-white mb-4">Gaming Reels</h2>
                    <div class="reels-container" id="gaming-reels-container">
                        <!-- Reels will be dynamically added here -->
                    </div>
                </div>

                <!-- Stories Section -->
                <div class="stories-container" id="gaming-stories-container">
                    <!-- Stories will be dynamically added here -->
                </div>

                <!-- Create Post Box -->
                <div class="create-post-box mb-8">
                    <div class="flex items-start space-x-4">
                        <div class="user-avatar bg-gradient-to-r from-purple-500 to-pink-500" id="gaming-user-avatar">
                            <span id="gaming-user-initial">U</span>
                        </div>
                        <div class="flex-1">
                            <textarea class="post-input" placeholder="Share your gaming moment..." id="gaming-post-input"></textarea>
                            
                            <!-- Media Preview -->
                            <div id="gaming-media-preview" class="media-preview"></div>
                            
                            <div class="post-options">
                                <div class="flex space-x-4">
                                    <div class="option-button file-input-label" onclick="document.getElementById('gaming-image-input').click()">
                                        <i class="fas fa-image"></i>
                                        <span>Photo</span>
                                        <input type="file" id="gaming-image-input" class="file-input" accept="image/*" onchange="handleMediaUpload(this, 'gaming')">
                                    </div>
                                    <div class="option-button file-input-label" onclick="document.getElementById('gaming-video-input').click()">
                                        <i class="fas fa-video"></i>
                                        <span>Video</span>
                                        <input type="file" id="gaming-video-input" class="file-input" accept="video/*" onchange="handleMediaUpload(this, 'gaming')">
                                    </div>
                                    <div class="option-button" onclick="showStoryCreationModal('gaming')">
                                        <i class="fas fa-feather"></i>
                                        <span>Story</span>
                                    </div>
                                    <div class="option-button" onclick="createReel('gaming')">
                                        <i class="fas fa-film"></i>
                                        <span>Reel</span>
                                    </div>
                                </div>
                                <button class="btn-primary" onclick="createNewPost('gaming')">Post</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Posts Feed -->
                <div id="gaming-posts-feed">
                    <!-- Posts will be dynamically added here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Life Zone Page -->
    <div id="life-zone-page" class="hidden fixed inset-0 bg-gradient-to-br from-pink-900 to-rose-900 z-50 overflow-y-auto">
        <div class="min-h-screen">
            <!-- Zone Header -->
            <div class="zone-header">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-4">
                            <button class="btn-secondary" onclick="showHomePage()">
                                <i class="fas fa-arrow-left mr-2"></i>Back
                            </button>
                            <div>
                                <h1 class="text-3xl font-bold text-white">Daily Life Zone</h1>
                                <p class="text-white/60">Share your everyday moments</p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-4">
                            <button class="btn-primary" onclick="showCreatePostModal('life')">
                                <i class="fas fa-plus mr-2"></i>New Post
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Zone Content -->
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                <!-- Reels Section -->
                <div class="reels-section">
                    <h2 class="text-2xl font-bold text-white mb-4">Life Reels</h2>
                    <div class="reels-container" id="life-reels-container">
                        <!-- Reels will be dynamically added here -->
                    </div>
                </div>

                <!-- Stories Section -->
                <div class="stories-container" id="life-stories-container">
                    <!-- Stories will be dynamically added here -->
                </div>

                <!-- Create Post Box -->
                <div class="create-post-box mb-8">
                    <div class="flex items-start space-x-4">
                        <div class="user-avatar bg-gradient-to-r from-pink-500 to-rose-500" id="life-user-avatar">
                            <span id="life-user-initial">U</span>
                        </div>
                        <div class="flex-1">
                            <textarea class="post-input" placeholder="What's happening in your life..." id="life-post-input"></textarea>
                            
                            <!-- Media Preview -->
                            <div id="life-media-preview" class="media-preview"></div>
                            
                            <div class="post-options">
                                <div class="flex space-x-4">
                                    <div class="option-button file-input-label" onclick="document.getElementById('life-image-input').click()">
                                        <i class="fas fa-image"></i>
                                        <span>Photo</span>
                                        <input type="file" id="life-image-input" class="file-input" accept="image/*" onchange="handleMediaUpload(this, 'life')">
                                    </div>
                                    <div class="option-button file-input-label" onclick="document.getElementById('life-video-input').click()">
                                        <i class="fas fa-video"></i>
                                        <span>Video</span>
                                        <input type="file" id="life-video-input" class="file-input" accept="video/*" onchange="handleMediaUpload(this, 'life')">
                                    </div>
                                    <div class="option-button" onclick="showStoryCreationModal('life')">
                                        <i class="fas fa-feather"></i>
                                        <span>Story</span>
                                    </div>
                                    <div class="option-button" onclick="createReel('life')">
                                        <i class="fas fa-film"></i>
                                        <span>Reel</span>
                                    </div>
                                </div>
                                <button class="btn-primary" onclick="createNewPost('life')">Post</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Posts Feed -->
                <div id="life-posts-feed">
                    <!-- Posts will be dynamically added here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Culture Zone Page -->
    <div id="culture-zone-page" class="hidden fixed inset-0 bg-gradient-to-br from-cyan-900 to-blue-900 z-50 overflow-y-auto">
        <div class="min-h-screen">
            <!-- Zone Header -->
            <div class="zone-header">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-4">
                            <button class="btn-secondary" onclick="showHomePage()">
                                <i class="fas fa-arrow-left mr-2"></i>Back
                            </button>
                            <div>
                                <h1 class="text-3xl font-bold text-white">Culture Zone</h1>
                                <p class="text-white/60">Celebrate diversity and traditions</p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-4">
                            <button class="btn-primary" onclick="showCreatePostModal('culture')">
                                <i class="fas fa-plus mr-2"></i>New Post
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Zone Content -->
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                <!-- Reels Section -->
                <div class="reels-section">
                    <h2 class="text-2xl font-bold text-white mb-4">Culture Reels</h2>
                    <div class="reels-container" id="culture-reels-container">
                        <!-- Reels will be dynamically added here -->
                    </div>
                </div>

                <!-- Stories Section -->
                <div class="stories-container" id="culture-stories-container">
                    <!-- Stories will be dynamically added here -->
                </div>

                <!-- Create Post Box -->
                <div class="create-post-box mb-8">
                    <div class="flex items-start space-x-4">
                        <div class="user-avatar bg-gradient-to-r from-cyan-500 to-blue-500" id="culture-user-avatar">
                            <span id="culture-user-initial">U</span>
                        </div>
                        <div class="flex-1">
                            <textarea class="post-input" placeholder="Share cultural experiences..." id="culture-post-input"></textarea>
                            
                            <!-- Media Preview -->
                            <div id="culture-media-preview" class="media-preview"></div>
                            
                            <div class="post-options">
                                <div class="flex space-x-4">
                                    <div class="option-button file-input-label" onclick="document.getElementById('culture-image-input').click()">
                                        <i class="fas fa-image"></i>
                                        <span>Photo</span>
                                        <input type="file" id="culture-image-input" class="file-input" accept="image/*" onchange="handleMediaUpload(this, 'culture')">
                                    </div>
                                    <div class="option-button file-input-label" onclick="document.getElementById('culture-video-input').click()">
                                        <i class="fas fa-video"></i>
                                        <span>Video</span>
                                        <input type="file" id="culture-video-input" class="file-input" accept="video/*" onchange="handleMediaUpload(this, 'culture')">
                                    </div>
                                    <div class="option-button" onclick="showStoryCreationModal('culture')">
                                        <i class="fas fa-feather"></i>
                                        <span>Story</span>
                                    </div>
                                    <div class="option-button" onclick="createReel('culture')">
                                        <i class="fas fa-film"></i>
                                        <span>Reel</span>
                                    </div>
                                </div>
                                <button class="btn-primary" onclick="createNewPost('culture')">Post</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Posts Feed -->
                <div id="culture-posts-feed">
                    <!-- Posts will be dynamically added here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Professional Zone Page -->
    <div id="professional-zone-page" class="hidden fixed inset-0 bg-gradient-to-br from-orange-900 to-red-900 z-50 overflow-y-auto">
        <div class="min-h-screen">
            <!-- Zone Header -->
            <div class="zone-header">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-4">
                            <button class="btn-secondary" onclick="showHomePage()">
                                <i class="fas fa-arrow-left mr-2"></i>Back
                            </button>
                            <div>
                                <h1 class="text-3xl font-bold text-white">Professional Zone</h1>
                                <p class="text-white/60">Network and share industry insights</p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-4">
                            <button class="btn-primary" onclick="showCreatePostModal('professional')">
                                <i class="fas fa-plus mr-2"></i>New Post
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Zone Content -->
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                <!-- Reels Section -->
                <div class="reels-section">
                    <h2 class="text-2xl font-bold text-white mb-4">Professional Reels</h2>
                    <div class="reels-container" id="professional-reels-container">
                        <!-- Reels will be dynamically added here -->
                    </div>
                </div>

                <!-- Stories Section -->
                <div class="stories-container" id="professional-stories-container">
                    <!-- Stories will be dynamically added here -->
                </div>

                <!-- Create Post Box -->
                <div class="create-post-box mb-8">
                    <div class="flex items-start space-x-4">
                        <div class="user-avatar bg-gradient-to-r from-orange-500 to-red-500" id="professional-user-avatar">
                            <span id="professional-user-initial">U</span>
                        </div>
                        <div class="flex-1">
                            <textarea class="post-input" placeholder="Share professional insights..." id="professional-post-input"></textarea>
                            
                            <!-- Media Preview -->
                            <div id="professional-media-preview" class="media-preview"></div>
                            
                            <div class="post-options">
                                <div class="flex space-x-4">
                                    <div class="option-button file-input-label" onclick="document.getElementById('professional-image-input').click()">
                                        <i class="fas fa-image"></i>
                                        <span>Photo</span>
                                        <input type="file" id="professional-image-input" class="file-input" accept="image/*" onchange="handleMediaUpload(this, 'professional')">
                                    </div>
                                    <div class="option-button file-input-label" onclick="document.getElementById('professional-video-input').click()">
                                        <i class="fas fa-video"></i>
                                        <span>Video</span>
                                        <input type="file" id="professional-video-input" class="file-input" accept="video/*" onchange="handleMediaUpload(this, 'professional')">
                                    </div>
                                    <div class="option-button" onclick="showStoryCreationModal('professional')">
                                        <i class="fas fa-feather"></i>
                                        <span>Story</span>
                                    </div>
                                    <div class="option-button" onclick="createReel('professional')">
                                        <i class="fas fa-film"></i>
                                        <span>Reel</span>
                                    </div>
                                </div>
                                <button class="btn-primary" onclick="createNewPost('professional')">Post</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Posts Feed -->
                <div id="professional-posts-feed">
                    <!-- Posts will be dynamically added here -->
                </div>
            </div>
        </div>
    </div>

    <!-- REAL AUTH MODAL -->
<div id="auth-modal" class="hidden fixed inset-0 bg-black/80 backdrop-blur-md flex items-center justify-center z-50 p-4">
    <div class="glass rounded-2xl p-8 max-w-md w-full">
        <div class="text-center mb-8">
            <h2 class="text-3xl font-bold gradient-text mb-2" id="auth-modal-title">Join ZYLORB</h2>
            <p class="text-white/60" id="auth-modal-subtitle">Create your account to explore all four zones</p>
        </div>

        <form id="auth-form">
            <div class="space-y-4">
                <div id="name-field">
                    <label class="block text-white/80 mb-2">Full Name</label>
                    <input type="text" class="w-full bg-white/20 border-2 border-white/30 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-purple-500 focus:bg-white/30 transition-all duration-300" 
                           placeholder="Enter your full name" id="auth-name" style="backdrop-filter: blur(10px);">
                </div>
                
                <div>
                    <label class="block text-white/80 mb-2">Email</label>
                    <input type="email" class="w-full bg-white/20 border-2 border-white/30 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-purple-500 focus:bg-white/30 transition-all duration-300" 
                           placeholder="Enter your email" id="auth-email" style="backdrop-filter: blur(10px);">
                </div>
                
                <div>
                    <label class="block text-white/80 mb-2">Password</label>
                    <input type="password" class="w-full bg-white/20 border-2 border-white/30 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-purple-500 focus:bg-white/30 transition-all duration-300" 
                           placeholder="Enter your password" id="auth-password" style="backdrop-filter: blur(10px);">
                </div>
                
                <div class="flex items-center space-x-2">
                    <input type="checkbox" class="custom-checkbox" id="auth-terms">
                    <label for="auth-terms" class="text-white/80 text-sm">I agree to the <a href="#" class="text-purple-400 hover:underline">Terms of Service</a> and <a href="#" class="text-purple-400 hover:underline">Privacy Policy</a></label>
                </div>
            </div>

            <button type="submit" class="btn-primary w-full mt-6" id="auth-submit-btn">
                Create Account
            </button>
        </form>

        <div class="text-center mt-6">
            <p class="text-white/60" id="auth-switch-text">
                Already have an account? <a href="#" class="text-purple-400 hover:underline font-medium" id="auth-switch-link">Sign In</a>
            </p>
        </div>

        <button class="absolute top-4 right-4 text-white/60 hover:text-white" onclick="hideAuthModal()">
            <i class="fas fa-times text-xl"></i>
        </button>
    </div>
</div>

    <!-- REAL POST CREATION MODAL -->
    <div id="create-post-modal" class="hidden fixed inset-0 bg-black/80 backdrop-blur-md flex items-center justify-center z-50 p-4">
        <div class="glass rounded-2xl p-6 max-w-2xl w-full">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-2xl font-bold text-white">Create New Post</h3>
                <button class="text-white/60 hover:text-white" onclick="hideCreatePostModal()">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>

            <div class="flex items-start space-x-4 mb-6">
                <div class="user-avatar bg-gradient-to-r from-purple-500 to-pink-500" id="post-user-avatar">
                    <span id="post-user-initial">U</span>
                </div>
                <div>
                    <div class="text-white font-semibold" id="post-username">User Name</div>
                    <div class="text-white/60 text-sm" id="post-zone">Gaming Zone</div>
                </div>
            </div>

            <textarea class="post-input w-full mb-6" placeholder="What would you like to share?" id="post-content"></textarea>

            <!-- Media Preview -->
            <div id="post-media-preview" class="media-preview mb-6"></div>

            <div class="flex justify-between items-center">
                <div class="flex space-x-4">
                    <div class="option-button file-input-label" onclick="document.getElementById('modal-image-input').click()">
                        <i class="fas fa-image"></i>
                        <span>Add Photo</span>
                        <input type="file" id="modal-image-input" class="file-input" accept="image/*" onchange="handleModalMediaUpload(this)">
                    </div>
                    <div class="option-button file-input-label" onclick="document.getElementById('modal-video-input').click()">
                        <i class="fas fa-video"></i>
                        <span>Add Video</span>
                        <input type="file" id="modal-video-input" class="file-input" accept="video/*" onchange="handleModalMediaUpload(this)">
                    </div>
                    <div class="option-button">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>Add Location</span>
                    </div>
                </div>
                <button class="btn-primary" onclick="createNewPostFromModal()">Post</button>
            </div>
        </div>
    </div>

    <!-- STORY CREATION MODAL -->
    <div id="story-creation-modal" class="story-creation-modal">
        <div class="story-creation-content">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-2xl font-bold text-white">Create Story</h3>
                <button class="text-white/60 hover:text-white" onclick="hideStoryCreationModal()">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>

            <div class="flex items-start space-x-4 mb-6">
                <div class="user-avatar bg-gradient-to-r from-purple-500 to-pink-500" id="story-user-avatar">
                    <span id="story-user-initial">U</span>
                </div>
                <div>
                    <div class="text-white font-semibold" id="story-username">User Name</div>
                    <div class="text-white/60 text-sm" id="story-zone">Gaming Zone</div>
                </div>
            </div>

            <textarea class="post-input w-full mb-6" placeholder="Add text to your story (optional)" id="story-text"></textarea>

            <!-- Media Preview -->
            <div id="story-media-preview" class="media-preview mb-6"></div>

            <div class="flex justify-between items-center">
                <div class="flex space-x-4">
                    <div class="option-button file-input-label" onclick="document.getElementById('story-image-input').click()">
                        <i class="fas fa-image"></i>
                        <span>Add Photo</span>
                        <input type="file" id="story-image-input" class="file-input" accept="image/*" onchange="handleStoryMediaUpload(this)">
                    </div>
                    <div class="option-button file-input-label" onclick="document.getElementById('story-video-input').click()">
                        <i class="fas fa-video"></i>
                        <span>Add Video</span>
                        <input type="file" id="story-video-input" class="file-input" accept="video/*" onchange="handleStoryMediaUpload(this)">
                    </div>
                </div>
                <button class="btn-primary" onclick="createNewStory()">Add to Story</button>
            </div>
        </div>
    </div>

    <!-- LIVE STREAM MODAL -->
    <div id="live-stream-modal" class="live-stream-modal">
        <div class="live-stream-content">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-2xl font-bold text-white">Go Live</h3>
                <button class="text-white/60 hover:text-white" onclick="hideLiveStreamModal()">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>

            <div class="flex items-start space-x-4 mb-6">
                <div class="user-avatar bg-gradient-to-r from-purple-500 to-pink-500" id="live-user-avatar">
                    <span id="live-user-initial">U</span>
                </div>
                <div>
                    <div class="text-white font-semibold" id="live-username">User Name</div>
                    <div class="text-white/60 text-sm">Start a live stream</div>
                </div>
            </div>

            <div class="space-y-4">
                <div>
                    <label class="block text-white/80 mb-2">Stream Title</label>
                    <input type="text" class="w-full bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-purple-500" placeholder="Enter stream title" id="stream-title">
                </div>
                
                <div>
                    <label class="block text-white/80 mb-2">Zone</label>
                    <select class="w-full bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-purple-500" id="stream-zone">
                        <option value="gaming">Gaming Zone</option>
                        <option value="life">Life Zone</option>
                        <option value="culture">Culture Zone</option>
                        <option value="professional">Professional Zone</option>
                    </select>
                </div>
                
                <div class="live-stream-video" id="live-preview">
                    <div class="text-center">
                        <i class="fas fa-video text-4xl mb-2"></i>
                        <div>Live Stream Preview</div>
                        <div class="text-sm text-white/60 mt-2">Stream will start when you click "Go Live"</div>
                    </div>
                </div>
                
                <div class="flex gap-4">
                    <button class="btn-secondary flex-1" onclick="hideLiveStreamModal()">Cancel</button>
                    <button class="btn-primary flex-1" onclick="startLiveStream()">
                        <i class="fas fa-broadcast-tower mr-2"></i>Go Live
                    </button>
                </div>
            </div>
        </div>
    </div>
<!-- REAL TIKTOK STYLE LIVE STREAM -->
<div id="tiktok-live-modal" class="hidden fixed inset-0 bg-black z-50">
    <div class="relative w-full h-full">
        <!-- Live Video Stream -->
        <video id="tiktok-live-video" autoplay muted class="w-full h-full object-cover"></video>
        
        <!-- Live Controls Overlay -->
        <div class="absolute top-0 left-0 right-0 p-4 bg-gradient-to-b from-black/60 to-transparent">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-3">
                    <div class="w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center">
                        <span class="text-white font-bold" id="live-user-avatar">U</span>
                    </div>
                    <div>
                        <div class="text-white font-bold" id="live-username">User Name</div>
                        <div class="flex items-center space-x-2">
                            <div class="live-indicator"></div>
                            <span class="text-white/80 text-sm" id="live-viewers">0 viewers</span>
                        </div>
                    </div>
                </div>
                <button class="text-white bg-red-500 px-4 py-2 rounded-full font-bold" onclick="endTikTokLive()">
                    END LIVE
                </button>
            </div>
        </div>

        <!-- Live Comments Sidebar -->
        <div class="absolute right-4 top-20 bottom-20 w-80 bg-black/40 backdrop-blur-md rounded-2xl p-4 overflow-hidden">
            <h3 class="text-white font-bold mb-4">Live Comments</h3>
            <div id="live-comments" class="h-96 overflow-y-auto space-y-3">
                <!-- Comments will appear here -->
            </div>
            <div class="absolute bottom-4 left-4 right-4">
                <div class="flex space-x-2">
                    <input type="text" id="live-comment-input" placeholder="Add comment..." 
                           class="flex-1 bg-white/20 border border-white/30 rounded-full px-4 py-2 text-white focus:outline-none focus:border-purple-500">
                    <button class="bg-purple-500 text-white rounded-full w-10 h-10 flex items-center justify-center" onclick="sendLiveComment()">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Live Reactions -->
        <div class="absolute bottom-20 left-4">
            <div class="flex space-x-3">
                <button class="live-reaction-btn" onclick="sendLiveReaction('â¤ï¸')">â¤ï¸</button>
                <button class="live-reaction-btn" onclick="sendLiveReaction('ðŸ”¥')">ðŸ”¥</button>
                <button class="live-reaction-btn" onclick="sendLiveReaction('ðŸ˜‚')">ðŸ˜‚</button>
                <button class="live-reaction-btn" onclick="sendLiveReaction('ðŸ˜®')">ðŸ˜®</button>
            </div>
        </div>

        <!-- Gift Button -->
        <div class="absolute bottom-20 right-4">
            <button class="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-4 py-2 rounded-full font-bold flex items-center space-x-2" onclick="showGiftMenu()">
                <i class="fas fa-gift"></i>
                <span>Send Gift</span>
            </button>
        </div>
    </div>
</div>
    <!-- STORY VIEWER -->
    <div id="story-viewer" class="story-viewer">
        <div class="story-content">
            <div class="story-progress" id="story-progress"></div>
            <div id="story-media"></div>
            <button class="absolute top-4 right-4 text-white text-2xl" onclick="closeStoryViewer()">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>
<!-- INSTAGRAM STYLE REELS FULLSCREEN -->
<div id="instagram-reels" class="hidden fixed inset-0 bg-black z-50">
    <div class="relative w-full h-full">
        <!-- Reel Video -->
        <video id="reel-video" autoplay muted class="w-full h-full object-cover"></video>
        
        <!-- Reel Controls -->
        <div class="absolute top-0 left-0 right-0 p-4 bg-gradient-to-b from-black/60 to-transparent">
            <div class="flex justify-between items-center">
                <button class="text-white text-2xl" onclick="closeInstagramReel()">
                    <i class="fas fa-chevron-down"></i>
                </button>
                <div class="text-white font-bold">Reels</div>
                <button class="text-white text-xl" onclick="toggleReelSound()">
                    <i class="fas fa-volume-mute" id="sound-icon"></i>
                </button>
            </div>
        </div>

        <!-- Reel Info Sidebar -->
        <div class="absolute bottom-20 left-4 right-4">
            <div class="flex justify-between items-end">
                <div class="flex-1">
                    <div class="flex items-center space-x-3 mb-3">
                        <div class="user-avatar bg-gradient-to-r from-purple-500 to-pink-500" id="reel-user-avatar">U</div>
                        <div class="text-white font-semibold" id="reel-username">Username</div>
                        <button class="text-white bg-white/20 px-3 py-1 rounded-full text-sm">Follow</button>
                    </div>
                    <p class="text-white mb-2" id="reel-caption">Caption will appear here...</p>
                    <div class="flex items-center space-x-4 text-white/80">
                        <div class="flex items-center space-x-1">
                            <i class="fas fa-music"></i>
                            <span id="reel-music">Original Sound</span>
                        </div>
                    </div>
                </div>
                
                <!-- Action Buttons -->
                <div class="flex flex-col items-center space-y-4 ml-4">
                    <button class="reel-action-btn" onclick="likeReel()">
                        <i class="fas fa-heart text-2xl"></i>
                        <span id="reel-likes">0</span>
                    </button>
                    <button class="reel-action-btn" onclick="focusCommentInput()">
                        <i class="fas fa-comment text-2xl"></i>
                        <span id="reel-comments">0</span>
                    </button>
                    <button class="reel-action-btn" onclick="shareReel()">
                        <i class="fas fa-share text-2xl"></i>
                        <span>Share</span>
                    </button>
                    <button class="reel-action-btn" onclick="showMoreOptions()">
                        <i class="fas fa-ellipsis-h text-2xl"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Comment Input -->
        <div class="absolute bottom-4 left-4 right-4">
            <div class="flex space-x-2">
                <input type="text" id="reel-comment-input" placeholder="Add comment..." 
                       class="flex-1 bg-white/20 border border-white/30 rounded-full px-4 py-3 text-white focus:outline-none focus:border-purple-500">
                <button class="text-purple-400 font-semibold" onclick="addReelComment()">Post</button>
            </div>
        </div>
    </div>
</div>

    <!-- SHARE MODAL -->
    <div id="share-modal" class="share-modal">
        <div class="share-content">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-2xl font-bold text-white">Share Post</h3>
                <button class="text-white/60 hover:text-white" onclick="hideShareModal()">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <div class="space-y-4">
                <div class="flex items-center space-x-4 p-4 bg-white/10 rounded-xl">
                    <div class="user-avatar bg-gradient-to-r from-purple-500 to-pink-500" id="share-user-avatar">U</div>
                    <div>
                        <div class="text-white font-semibold" id="share-username">User Name</div>
                        <div class="text-white/60 text-sm" id="share-content">Post content preview...</div>
                    </div>
                </div>
                
                <textarea class="w-full bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-purple-500" placeholder="Add a message (optional)" id="share-message"></textarea>
                
                <div class="grid grid-cols-2 gap-4">
                    <button class="btn-secondary" onclick="copyPostLink()">
                        <i class="fas fa-link mr-2"></i>Copy Link
                    </button>
                    <button class="btn-primary" onclick="shareToZone()">
                        <i class="fas fa-share mr-2"></i>Share to Zone
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- PROFILE PAGE -->
    <div id="profile-page" class="profile-page">
        <div class="profile-content">
            <div class="profile-header">
                <div class="profile-avatar bg-gradient-to-r from-green-500 to-blue-500" id="profile-avatar">
                    <span id="profile-initial">U</span>
                </div>
                <h2 class="text-3xl font-bold text-white" id="profile-name">User Name</h2>
                <p class="text-white/60" id="profile-email">user@example.com</p>
                <p class="text-white/60 text-sm mt-2">Member since <span id="profile-join-date">2023</span></p>
            </div>

            <div class="profile-stats">
                <div class="stat-item">
                    <div class="stat-number" id="profile-posts-count">0</div>
                    <div class="stat-label">Posts</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="profile-likes-count">0</div>
                    <div class="stat-label">Likes</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="profile-comments-count">0</div>
                    <div class="stat-label">Comments</div>
                </div>
            </div>

            <h3 class="text-xl font-bold text-white mb-4">Your Posts</h3>
            <div class="profile-posts" id="profile-posts">
                <!-- REAL-TIME PROFILE SETTINGS MODAL -->
<div id="profile-settings-modal" class="hidden fixed inset-0 bg-black/90 backdrop-blur-md z-50 overflow-y-auto">
    <div class="min-h-screen flex items-center justify-center p-4">
        <div class="glass rounded-2xl p-6 max-w-2xl w-full">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-2xl font-bold text-white">Profile Settings</h3>
                <button class="text-white/60 hover:text-white" onclick="hideProfileSettings()">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>

            <div class="space-y-6">
                <!-- Profile Picture Section -->
                <div class="flex items-center space-x-6">
                    <div class="relative">
                        <div class="profile-avatar bg-gradient-to-r from-green-500 to-blue-500 w-20 h-20 text-2xl" id="settings-profile-avatar">
                            <span id="settings-profile-initial">U</span>
                        </div>
                        <input type="file" id="profile-picture-input" class="hidden" accept="image/*" onchange="updateProfilePicture(this)">
                        <button class="absolute bottom-0 right-0 bg-purple-500 text-white rounded-full w-8 h-8 flex items-center justify-center" onclick="document.getElementById('profile-picture-input').click()">
                            <i class="fas fa-camera text-sm"></i>
                        </button>
                    </div>
                    <div>
                        <h4 class="text-white font-semibold">Profile Picture</h4>
                        <p class="text-white/60 text-sm">Click the camera icon to update</p>
                    </div>
                </div>

                <!-- Personal Information -->
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-white/80 mb-2">Full Name</label>
                        <input type="text" class="w-full bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-purple-500" 
                               id="settings-name" value="">
                    </div>
                    <div>
                        <label class="block text-white/80 mb-2">Email</label>
                        <input type="email" class="w-full bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-purple-500" 
                               id="settings-email" value="">
                    </div>
                </div>

                <!-- Bio Section -->
                <div>
                    <label class="block text-white/80 mb-2">Bio</label>
                    <textarea class="w-full bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-purple-500" 
                              rows="3" id="settings-bio" placeholder="Tell everyone about yourself..."></textarea>
                </div>

                <!-- Privacy Settings -->
                <div class="border-t border-white/20 pt-4">
                    <h4 class="text-white font-semibold mb-4">Privacy Settings</h4>
                    <div class="space-y-3">
                        <div class="flex items-center justify-between">
                            <div>
                                <div class="text-white font-medium">Private Account</div>
                                <div class="text-white/60 text-sm">Only approved followers can see your content</div>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="private-account">
                                <span class="slider"></span>
                            </label>
                        </div>
                        
                        <div class="flex items-center justify-between">
                            <div>
                                <div class="text-white font-medium">Allow Messages</div>
                                <div class="text-white/60 text-sm">Anyone can send you direct messages</div>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="allow-messages" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Save Buttons -->
                <div class="flex gap-4 pt-4">
                    <button class="btn-secondary flex-1" onclick="hideProfileSettings()">Cancel</button>
                    <button class="btn-primary flex-1" onclick="saveProfileSettings()">Save Changes</button>
                </div>
            </div>
        </div>
    </div>
</div>
                <!-- User posts will be displayed here -->
            </div>

            <button class="btn-secondary w-full mt-6" onclick="hideProfilePage()">
                Close Profile
            </button>
        </div>
    </div>

    <!-- Footer -->
    <footer class="glass-dark border-t border-white/10 py-12 px-4 sm:px-6 lg:px-8">
        <div class="max-w-7xl mx-auto">
            <div class="grid md:grid-cols-4 gap-8">
                <div>
                    <div class="flex items-center space-x-3 mb-4">
                        <div class="w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg flex items-center justify-center">
                            <span class="text-white font-bold">Z</span>
                        </div>
                        <h3 class="text-xl font-bold gradient-text">ZYLORB</h3>
                    </div>
                    <p class="text-white/60 text-sm">
                        The world's first 4-zone social media platform connecting millions across gaming, life, culture, and professional spaces.
                    </p>
                </div>
                
                <div>
                    <h4 class="text-white font-semibold mb-4">Zones</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-white/60 hover:text-white transition-colors">Gaming Zone</a></li>
                        <li><a href="#" class="text-white/60 hover:text-white transition-colors">Daily Life Zone</a></li>
                        <li><a href="#" class="text-white/60 hover:text-white transition-colors">Culture Zone</a></li>
                        <li><a href="#" class="text-white/60 hover:text-white transition-colors">Professional Zone</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="text-white font-semibold mb-4">Company</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-white/60 hover:text-white transition-colors">About Us</a></li>
                        <li><a href="#" class="text-white/60 hover:text-white transition-colors">Careers</a></li>
                        <li><a href="#" class="text-white/60 hover:text-white transition-colors">Press</a></li>
                        <li><a href="#" class="text-white/60 hover:text-white transition-colors">Contact</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="text-white font-semibold mb-4">Legal</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-white/60 hover:text-white transition-colors">Terms of Service</a></li>
                        <li><a href="#" class="text-white/60 hover:text-white transition-colors">Privacy Policy</a></li>
                        <li><a href="#" class="text-white/60 hover:text-white transition-colors">Cookie Policy</a></li>
                        <li><a href="#" class="text-white/60 hover:text-white transition-colors">Community Guidelines</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="border-t border-white/10 mt-8 pt-8 text-center">
                <p class="text-white/60 text-sm">Â© 2025 ZYLORB. All rights reserved.</p>
            </div>
        </div>
    </footer>
<!-- Add this CSS and JavaScript to fix all real-time issues -->

<style>
/* Additional Real-time Styles */
.reels-fullscreen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #000;
    z-index: 1000;
    display: none;
    flex-direction: column;
}

.reel-video-fullscreen {
    width: 100%;
    height: 100%;
    object-fit: contain;
    background: #000;
}

.reel-controls {
    position: absolute;
    bottom: 20px;
    left: 0;
    right: 0;
    display: flex;
    justify-content: center;
    gap: 20px;
    padding: 20px;
}

.reel-control-btn {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.2);
    border: none;
    color: white;
    font-size: 20px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(10px);
}

.profile-edit-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.9);
    z-index: 100;
    display: none;
    align-items: center;
    justify-content: center;
}

.other-user-profile {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.9);
    z-index: 100;
    display: none;
    align-items: center;
    justify-content: center;
    overflow-y: auto;
}

/* Enhanced notification styles */
.notification-item-real {
    cursor: pointer;
    transition: all 0.3s ease;
    border-radius: 12px;
    margin-bottom: 10px;
}

.notification-item-real:hover {
    background: rgba(255, 255, 255, 0.1);
    transform: translateX(5px);
}

/* Auth button fixes */
.auth-btn-fixed {
    position: relative;
    z-index: 1000;
}

/* Profile picture upload */
.profile-pic-upload {
    position: relative;
    cursor: pointer;
}

.profile-pic-upload input {
    position: absolute;
    width: 100%;
    height: 100%;
    opacity: 0;
    cursor: pointer;
}

/* Reels scroll container */
.reels-scroll-container {
    height: 80vh;
    overflow-y: auto;
    scroll-snap-type: y mandatory;
}

.reel-item {
    scroll-snap-align: start;
    height: 100%;
}
</style>

<!-- Add these modals before closing body tag -->

<!-- Profile Edit Modal -->
<div id="profile-edit-modal" class="profile-edit-modal">
    <div class="glass rounded-2xl p-6 max-w-md w-full">
        <div class="flex items-center justify-between mb-6">
            <h3 class="text-2xl font-bold text-white">Edit Profile</h3>
            <button class="text-white/60 hover:text-white" onclick="hideProfileEditModal()">
                <i class="fas fa-times text-xl"></i>
            </button>
        </div>

        <div class="space-y-4">
            <div class="text-center">
                <div class="profile-pic-upload inline-block">
                    <div class="profile-avatar bg-gradient-to-r from-green-500 to-blue-500 mx-auto mb-4" id="edit-profile-avatar">
                        <span id="edit-profile-initial">U</span>
                    </div>
                    <input type="file" id="profile-pic-input" accept="image/*" onchange="handleProfilePicUpload(this)">
                </div>
                <p class="text-white/60 text-sm">Click to change profile picture</p>
            </div>

            <div>
                <label class="block text-white/80 mb-2">Full Name</label>
                <input type="text" class="w-full bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-purple-500" 
                       id="edit-profile-name" value="">
            </div>

            <div>
                <label class="block text-white/80 mb-2">Bio</label>
                <textarea class="w-full bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-purple-500" 
                          rows="3" id="edit-profile-bio" placeholder="Tell everyone about yourself..."></textarea>
            </div>

            <div class="flex gap-4">
                <button class="btn-secondary flex-1" onclick="hideProfileEditModal()">Cancel</button>
                <button class="btn-primary flex-1" onclick="saveProfileChanges()">Save Changes</button>
            </div>
        </div>
    </div>
</div>

<!-- Other User Profile Modal -->
<div id="other-user-profile" class="other-user-profile">
    <div class="profile-content">
        <div class="profile-header">
            <div class="profile-avatar bg-gradient-to-r from-purple-500 to-pink-500" id="other-profile-avatar">
                <span id="other-profile-initial">U</span>
            </div>
            <h2 class="text-3xl font-bold text-white" id="other-profile-name">User Name</h2>
            <p class="text-white/60" id="other-profile-bio">No bio yet</p>
            <p class="text-white/60 text-sm mt-2">Member since <span id="other-profile-join-date">2023</span></p>
        </div>

        <div class="profile-stats">
            <div class="stat-item">
                <div class="stat-number" id="other-profile-posts-count">0</div>
                <div class="stat-label">Posts</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="other-profile-followers-count">0</div>
                <div class="stat-label">Followers</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="other-profile-following-count">0</div>
                <div class="stat-label">Following</div>
            </div>
        </div>

        <h3 class="text-xl font-bold text-white mb-4">Posts</h3>
        <div class="profile-posts" id="other-profile-posts">
            <!-- Other user's posts will be displayed here -->
        </div>

        <button class="btn-secondary w-full mt-6" onclick="hideOtherUserProfile()">
            Close Profile
        </button>
    </div>
</div>

<!-- Fullscreen Reels Viewer -->
<div id="reels-fullscreen" class="reels-fullscreen">
    <div class="reel-video-fullscreen-container" style="flex: 1; position: relative;">
        <video class="reel-video-fullscreen" id="fullscreen-reel-video" controls autoplay>
            Your browser does not support the video tag.
        </video>
        <div class="reel-controls">
            <button class="reel-control-btn" onclick="likeCurrentReel()">
                <i class="fas fa-heart"></i>
            </button>
            <button class="reel-control-btn" onclick="closeFullscreenReel()">
                <i class="fas fa-times"></i>
            </button>
            <button class="reel-control-btn" onclick="shareCurrentReel()">
                <i class="fas fa-share"></i>
            </button>
        </div>
    </div>
</div>

<script>
// ðŸš€ COMPLETE REAL-TIME FIXES
// Fixing all the issues mentioned

// 1. AUTH SYSTEM FIXES - Persistent login
function initializePersistentAuth() {
    console.log('ðŸ” Initializing Persistent Auth System...');
    
    // Check if user was previously logged in
    const savedUser = localStorage.getItem('zylorb_current_user');
    if (savedUser) {
        try {
            ZYLORB_STATE.currentUser = JSON.parse(savedUser);
            ZYLORB_STATE.isLoggedIn = true;
            updateUIForLoggedInUser();
            startRealTimeFeatures();
            showToast('Welcome back!', 'success');
        } catch (e) {
            console.error('Error loading saved user:', e);
            localStorage.removeItem('zylorb_current_user');
        }
    }
    
    // Fix auth buttons
    fixAuthButtons();
}

function fixAuthButtons() {
    // Ensure all auth buttons work properly
    const authButtons = document.querySelectorAll('.btn-primary, .btn-secondary');
    authButtons.forEach(btn => {
        if (btn.textContent.includes('Sign In') || btn.textContent.includes('Join Now') || btn.textContent.includes('Start Your Journey')) {
            btn.classList.add('auth-btn-fixed');
            btn.style.zIndex = '1000';
        }
    });
}

// Update auth submission to save user
const originalHandleAuthSubmit = window.handleAuthSubmit;
window.handleAuthSubmit = function(e) {
    e.preventDefault();
    
    const email = document.getElementById('auth-email').value;
    const password = document.getElementById('auth-password').value;
    const terms = document.getElementById('auth-terms').checked;
    
    if (ZYLORB_STATE.authMode === 'signup') {
        const name = document.getElementById('auth-name').value;
        
        if (!name || !email || !password) {
            showToast('Please fill in all fields', 'error');
            return;
        }
        
        if (!terms) {
            showToast('Please agree to the terms and conditions', 'error');
            return;
        }
        
        if (ZYLORB_STATE.users.find(u => u.email === email)) {
            showToast('User with this email already exists', 'error');
            return;
        }
        
        // Create user with enhanced profile
        ZYLORB_STATE.currentUser = {
            id: Date.now().toString(),
            name: name,
            email: email,
            avatar: name.charAt(0).toUpperCase(),
            joinDate: new Date().toISOString(),
            posts: [],
            likes: 0,
            comments: 0,
            followers: [],
            following: [],
            bio: 'Welcome to my ZYLORB profile!',
            profilePic: null,
            coverPic: null,
            isOnline: true
        };
        
        ZYLORB_STATE.users.push(ZYLORB_STATE.currentUser);
        ZYLORB_STATE.isLoggedIn = true;
        
        // Save to persistent storage
        localStorage.setItem('zylorb_current_user', JSON.stringify(ZYLORB_STATE.currentUser));
        saveToLocalStorage();
        
        updateUIForLoggedInUser();
        hideAuthModal();
        showToast(`Welcome to ZYLORB, ${name}!`, 'success');
        startRealTimeFeatures();
        
    } else {
        // Sign in
        if (!email || !password) {
            showToast('Please enter your email and password', 'error');
            return;
        }
        
        const user = ZYLORB_STATE.users.find(u => u.email === email);
        if (user) {
            ZYLORB_STATE.currentUser = user;
            ZYLORB_STATE.isLoggedIn = true;
            
            // Save to persistent storage
            localStorage.setItem('zylorb_current_user', JSON.stringify(ZYLORB_STATE.currentUser));
            
            updateUIForLoggedInUser();
            hideAuthModal();
            showToast('Welcome back!', 'success');
            startRealTimeFeatures();
        } else {
            showToast('Invalid email or password', 'error');
        }
    }
};

// Update logout to clear properly
const originalLogout = window.logout;
window.logout = function() {
    ZYLORB_STATE.currentUser = null;
    ZYLORB_STATE.isLoggedIn = false;
    
    // Clear persistent storage
    localStorage.removeItem('zylorb_current_user');
    
    updateUIForLoggedInUser();
    showHomePage();
    
    const userMenu = document.getElementById('user-menu');
    if (userMenu) userMenu.style.display = 'none';
    
    stopRealTimeFeatures();
    
    showToast('You have been logged out', 'info');
};

// 2. ENHANCED PROFILE SYSTEM
function showEnhancedProfilePage() {
    if (!ZYLORB_STATE.isLoggedIn) {
        showToast('Please sign in to view your profile', 'error');
        return;
    }
    
    const profilePage = document.getElementById('profile-page');
    const profileAvatar = document.getElementById('profile-avatar');
    const profileInitial = document.getElementById('profile-initial');
    const profileName = document.getElementById('profile-name');
    const profileEmail = document.getElementById('profile-email');
    const profileJoinDate = document.getElementById('profile-join-date');
    const profilePostsCount = document.getElementById('profile-posts-count');
    const profileLikesCount = document.getElementById('profile-likes-count');
    const profileCommentsCount = document.getElementById('profile-comments-count');
    const profilePosts = document.getElementById('profile-posts');
    
    if (ZYLORB_STATE.currentUser) {
        // Use profile pic if available, otherwise use initial
        if (ZYLORB_STATE.currentUser.profilePic) {
            profileAvatar.innerHTML = `<img src="${ZYLORB_STATE.currentUser.profilePic}" alt="Profile" style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover;">`;
        } else {
            profileAvatar.textContent = ZYLORB_STATE.currentUser.avatar;
            profileInitial.textContent = ZYLORB_STATE.currentUser.avatar;
        }
        
        profileName.textContent = ZYLORB_STATE.currentUser.name;
        profileEmail.textContent = ZYLORB_STATE.currentUser.email;
        profileJoinDate.textContent = new Date(ZYLORB_STATE.currentUser.joinDate).getFullYear();
        
        // Calculate real stats
        const postsCount = ZYLORB_STATE.currentUser.posts.length;
        const likesCount = ZYLORB_STATE.currentUser.likes;
        const commentsCount = ZYLORB_STATE.currentUser.comments;
        
        profilePostsCount.textContent = postsCount;
        profileLikesCount.textContent = likesCount;
        profileCommentsCount.textContent = commentsCount;
        
        // Load user posts
        loadEnhancedProfilePosts();
    }
    
    profilePage.style.display = 'flex';
}

// Replace original profile function
window.showProfilePage = showEnhancedProfilePage;

function showProfileEditModal() {
    const modal = document.getElementById('profile-edit-modal');
    const nameInput = document.getElementById('edit-profile-name');
    const bioInput = document.getElementById('edit-profile-bio');
    const avatar = document.getElementById('edit-profile-avatar');
    
    if (ZYLORB_STATE.currentUser) {
        nameInput.value = ZYLORB_STATE.currentUser.name;
        bioInput.value = ZYLORB_STATE.currentUser.bio || '';
        
        if (ZYLORB_STATE.currentUser.profilePic) {
            avatar.innerHTML = `<img src="${ZYLORB_STATE.currentUser.profilePic}" alt="Profile" style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover;">`;
        } else {
            avatar.textContent = ZYLORB_STATE.currentUser.avatar;
        }
    }
    
    modal.style.display = 'flex';
}

function hideProfileEditModal() {
    const modal = document.getElementById('profile-edit-modal');
    modal.style.display = 'none';
}

function handleProfilePicUpload(input) {
    const file = input.files[0];
    if (!file) return;
    
    if (!file.type.startsWith('image/')) {
        showToast('Please select an image file', 'error');
        return;
    }
    
    const objectUrl = URL.createObjectURL(file);
    const avatar = document.getElementById('edit-profile-avatar');
    
    avatar.innerHTML = `<img src="${objectUrl}" alt="Profile" style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover;">`;
    
    // Save to user profile
    ZYLORB_STATE.currentUser.profilePic = objectUrl;
    saveToLocalStorage();
    localStorage.setItem('zylorb_current_user', JSON.stringify(ZYLORB_STATE.currentUser));
    
    showToast('Profile picture updated!', 'success');
}

function saveProfileChanges() {
    const nameInput = document.getElementById('edit-profile-name');
    const bioInput = document.getElementById('edit-profile-bio');
    
    if (!nameInput.value.trim()) {
        showToast('Please enter your name', 'error');
        return;
    }
    
    ZYLORB_STATE.currentUser.name = nameInput.value.trim();
    ZYLORB_STATE.currentUser.bio = bioInput.value.trim();
    ZYLORB_STATE.currentUser.avatar = nameInput.value.trim().charAt(0).toUpperCase();
    
    // Update all instances
    saveToLocalStorage();
    localStorage.setItem('zylorb_current_user', JSON.stringify(ZYLORB_STATE.currentUser));
    updateUIForLoggedInUser();
    
    hideProfileEditModal();
    showToast('Profile updated successfully!', 'success');
}

// 3. ENHANCED NOTIFICATION SYSTEM
function showEnhancedNotificationsPage() {
    if (!ZYLORB_STATE.isLoggedIn) {
        showToast('Please sign in to view notifications', 'error');
        return;
    }
    
    const page = document.getElementById('notifications-page');
    page.classList.remove('hidden');
    
    loadEnhancedNotifications();
}

// Replace original notifications function
window.showNotificationsPage = showEnhancedNotificationsPage;

function loadEnhancedNotifications() {
    const container = document.getElementById('notifications-list');
    if (!container) return;
    
    container.innerHTML = '';
    
    if (PERMANENT_STORAGE.notifications.length === 0) {
        container.innerHTML = `
            <div class="text-center py-12">
                <i class="fas fa-bell-slash text-4xl text-white/40 mb-4"></i>
                <h3 class="text-xl font-bold text-white mb-2">No notifications yet</h3>
                <p class="text-white/60">Your notifications will appear here</p>
            </div>
        `;
        return;
    }
    
    PERMANENT_STORAGE.notifications.forEach(notification => {
        const notifElement = createEnhancedNotificationElement(notification);
        container.appendChild(notifElement);
    });
}

function createEnhancedNotificationElement(notification) {
    const element = document.createElement('div');
    element.className = `notification-item-real post-card ${notification.read ? '' : 'border-l-4 border-l-purple-500'}`;
    element.onclick = () => handleNotificationClick(notification);
    
    element.innerHTML = `
        <div class="flex items-start space-x-4">
            <div class="user-avatar ${getNotificationIcon(notification.type)}">
                <i class="${getNotificationIconClass(notification.type)}"></i>
            </div>
            <div class="flex-1">
                <p class="text-white/90 mb-2">${notification.message}</p>
                <div class="flex items-center justify-between">
                    <span class="text-white/60 text-sm">${formatTime(notification.timestamp)}</span>
                    ${!notification.read ? `
                        <button class="text-purple-400 text-sm hover:text-purple-300" onclick="event.stopPropagation(); markNotificationAsRead('${notification.id}')">
                            Mark as read
                        </button>
                    ` : ''}
                </div>
            </div>
        </div>
    `;
    
    return element;
}

function handleNotificationClick(notification) {
    markNotificationAsRead(notification.id);
    
    // Handle different notification types
    switch(notification.type) {
        case 'like':
        case 'comment':
            // Navigate to relevant post
            if (notification.zone) {
                hideNotificationsPage();
                enterZone(notification.zone);
            }
            break;
        case 'follow':
            // Show follower's profile
            hideNotificationsPage();
            showOtherUserProfile(notification.fromUserId);
            break;
        default:
            // Just mark as read
            break;
    }
}

// 4. ENHANCED REELS SYSTEM
function initializeEnhancedReels() {
    console.log('ðŸŽ¬ Initializing Enhanced Reels System...');
    
    // Create some sample reels for demonstration
    if (ZYLORB_STATE.reels.gaming.length === 0) {
        createSampleReels();
    }
}

function createSampleReels() {
    const sampleReels = [
        {
            id: 'reel_1',
            user: {
                id: 'user_1',
                name: 'ProGamer',
                avatar: 'P',
                color: 'from-purple-500 to-pink-500'
            },
            videoUrl: 'https://assets.mixkit.co/videos/preview/mixkit-gamer-playing-a-video-game-44751-large.mp4',
            title: 'Epic Gaming Moment!',
            likes: 245,
            comments: 12,
            timestamp: '2 hours ago'
        },
        {
            id: 'reel_2', 
            user: {
                id: 'user_2',
                name: 'GameMaster',
                avatar: 'G',
                color: 'from-blue-500 to-cyan-500'
            },
            videoUrl: 'https://assets.mixkit.co/videos/preview/mixkit-girl-playing-a-video-game-44750-large.mp4',
            title: 'New Game Strategy',
            likes: 189,
            comments: 8,
            timestamp: '5 hours ago'
        }
    ];
    
    sampleReels.forEach(reel => {
        ZYLORB_STATE.reels.gaming.push(reel);
        ZYLORB_STATE.reels.life.push(reel); // Add to multiple zones for demo
    });
    
    saveToLocalStorage();
}

function loadEnhancedReels(zone) {
    const container = document.getElementById(`${zone}-reels-container`);
    if (!container) return;
    
    container.innerHTML = '';
    
    if (ZYLORB_STATE.reels[zone] && ZYLORB_STATE.reels[zone].length > 0) {
        ZYLORB_STATE.reels[zone].forEach(reel => {
            const reelElement = createEnhancedReelElement(reel, zone);
            container.appendChild(reelElement);
        });
    } else {
        container.innerHTML = `
            <div class="text-center py-4 w-full">
                <p class="text-white/60">No reels yet. Be the first to create one!</p>
                <button class="btn-primary mt-2" onclick="createEnhancedReel('${zone}')">
                    <i class="fas fa-plus mr-2"></i>Create First Reel
                </button>
            </div>
        `;
    }
}

function createEnhancedReelElement(reel, zone) {
    const reelEl = document.createElement('div');
    reelEl.className = 'reel';
    reelEl.onclick = () => viewEnhancedReel(reel, zone);
    
    reelEl.innerHTML = `
        <div class="reel-video">
            <video>
                <source src="${reel.videoUrl}" type="video/mp4">
            </video>
            <div class="absolute bottom-2 left-2 right-2">
                <p class="text-white text-sm font-semibold truncate">${reel.title}</p>
                <div class="flex justify-between items-center mt-1">
                    <span class="text-white/80 text-xs">${reel.user.name}</span>
                    <div class="flex items-center space-x-2">
                        <span class="text-white/80 text-xs"><i class="fas fa-heart mr-1"></i>${reel.likes}</span>
                        <span class="text-white/80 text-xs"><i class="fas fa-comment mr-1"></i>${reel.comments}</span>
                    </div>
                </div>
            </div>
        </div>
    `;
    
    return reelEl;
}

function viewEnhancedReel(reel, zone) {
    const fullscreen = document.getElementById('reels-fullscreen');
    const video = document.getElementById('fullscreen-reel-video');
    
    video.innerHTML = `<source src="${reel.videoUrl}" type="video/mp4">`;
    video.load();
    
    fullscreen.style.display = 'flex';
    
    // Store current reel for interactions
    window.currentReel = reel;
}

function closeFullscreenReel() {
    const fullscreen = document.getElementById('reels-fullscreen');
    const video = document.getElementById('fullscreen-reel-video');
    
    video.pause();
    fullscreen.style.display = 'none';
    window.currentReel = null;
}

function likeCurrentReel() {
    if (window.currentReel) {
        window.currentReel.likes++;
        showToast('Liked reel!', 'success');
        // In real implementation, save to backend
    }
}

function createEnhancedReel(zone) {
    if (!ZYLORB_STATE.isLoggedIn) {
        showToast('Please sign in to create reels', 'error');
        return;
    }
    
    const fileInput = document.createElement('input');
    fileInput.type = 'file';
    fileInput.accept = 'video/*';
    fileInput.onchange = (e) => {
        const file = e.target.files[0];
        if (file) {
            const objectUrl = URL.createObjectURL(file);
            const title = prompt('Enter reel title:');
            
            if (title) {
                const newReel = {
                    id: 'reel_' + Date.now(),
                    user: {
                        id: ZYLORB_STATE.currentUser.id,
                        name: ZYLORB_STATE.currentUser.name,
                        avatar: ZYLORB_STATE.currentUser.avatar,
                        color: getZoneColor(zone)
                    },
                    videoUrl: objectUrl,
                    title: title,
                    likes: 0,
                    comments: [],
                    timestamp: 'Just now'
                };
                
                ZYLORB_STATE.reels[zone].unshift(newReel);
                saveToLocalStorage();
                loadEnhancedReels(zone);
                showToast('Reel created successfully!', 'success');
                
                // Create notification
                createNotification('reel_created', `You created a new reel: ${title}`);
            }
        }
    };
    fileInput.click();
}

// 5. PUBLIC POSTS & PROFILES
function makeAllPostsPublic() {
    // Ensure all posts are visible to all users
    Object.keys(ZYLORB_STATE.posts).forEach(zone => {
        ZYLORB_STATE.posts[zone].forEach(post => {
            post.isPublic = true;
            post.visibleToAll = true;
        });
    });
    saveToLocalStorage();
}

function showOtherUserProfile(userId) {
    const user = ZYLORB_STATE.users.find(u => u.id === userId);
    if (!user) {
        showToast('User not found', 'error');
        return;
    }
    
    const modal = document.getElementById('other-user-profile');
    const avatar = document.getElementById('other-profile-avatar');
    const name = document.getElementById('other-profile-name');
    const bio = document.getElementById('other-profile-bio');
    const joinDate = document.getElementById('other-profile-join-date');
    const postsCount = document.getElementById('other-profile-posts-count');
    const followersCount = document.getElementById('other-profile-followers-count');
    const followingCount = document.getElementById('other-profile-following-count');
    const postsContainer = document.getElementById('other-profile-posts');
    
    // Set profile data
    if (user.profilePic) {
        avatar.innerHTML = `<img src="${user.profilePic}" alt="Profile" style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover;">`;
    } else {
        avatar.textContent = user.avatar;
    }
    
    name.textContent = user.name;
    bio.textContent = user.bio || 'No bio yet';
    joinDate.textContent = new Date(user.joinDate).getFullYear();
    postsCount.textContent = user.posts.length;
    followersCount.textContent = user.followers.length;
    followingCount.textContent = user.following.length;
    
    // Load user's posts
    postsContainer.innerHTML = '';
    const userPosts = [];
    
    Object.keys(ZYLORB_STATE.posts).forEach(zone => {
        ZYLORB_STATE.posts[zone].forEach(post => {
            if (post.user.id === userId) {
                userPosts.push({...post, zone: zone});
            }
        });
    });
    
    if (userPosts.length === 0) {
        postsContainer.innerHTML = `
            <div class="col-span-full text-center py-8">
                <div class="text-6xl mb-4">ðŸ“</div>
                <h3 class="text-xl font-bold text-white mb-2">No posts yet</h3>
                <p class="text-white/60">This user hasn't posted anything yet</p>
            </div>
        `;
    } else {
        userPosts.forEach(post => {
            const postElement = document.createElement('div');
            postElement.className = 'profile-post';
            postElement.onclick = () => {
                hideOtherUserProfile();
                enterZone(post.zone);
            };
            
            let content = '';
            if (post.media) {
                if (post.media.type === 'image') {
                    content = `<img src="${post.media.url}" alt="Post media">`;
                } else {
                    content = `<video muted><source src="${post.media.url}" type="video/mp4"></video>`;
                }
            } else {
                content = `
                    <div class="profile-post-text">
                        <p>${post.content.length > 100 ? post.content.substring(0, 100) + '...' : post.content}</p>
                    </div>
                `;
            }
            
            postElement.innerHTML = `
                ${content}
                <div class="profile-post-zone">${post.zone}</div>
            `;
            
            postsContainer.appendChild(postElement);
        });
    }
    
    modal.style.display = 'flex';
}

function hideOtherUserProfile() {
    const modal = document.getElementById('other-user-profile');
    modal.style.display = 'none';
}

// 6. VOICE/VIDEO FIXES
function handleVideoUploadWithAudio(input, zone) {
    const file = input.files[0];
    if (!file) return;
    
    const preview = document.getElementById(`${zone}-media-preview`);
    if (!preview) return;
    
    preview.innerHTML = '';
    
    const objectUrl = URL.createObjectURL(file);
    const isVideo = file.type.startsWith('video/');
    
    if (isVideo) {
        preview.innerHTML = `
            <video controls style="width: 100%; max-height: 400px; background: #000;">
                <source src="${objectUrl}" type="${file.type}">
                Your browser does not support the video tag.
            </video>
            <button class="remove-media" onclick="removeMediaPreview('${zone}')">
                <i class="fas fa-times"></i>
            </button>
        `;
        ZYLORB_STATE.currentMedia[zone] = { type: 'video', url: objectUrl, file: file, hasAudio: true };
    } else {
        preview.innerHTML = `
            <img src="${objectUrl}" alt="Preview" style="width: 100%; max-height: 400px; object-fit: contain;">
            <button class="remove-media" onclick="removeMediaPreview('${zone}')">
                <i class="fas fa-times"></i>
            </button>
        `;
        ZYLORB_STATE.currentMedia[zone] = { type: 'image', url: objectUrl, file: file };
    }
    
    showToast(`${isVideo ? 'Video' : 'Image'} added with audio preserved`, 'success');
}

// Replace original media upload handlers
window.handleMediaUpload = handleVideoUploadWithAudio;
window.handleModalMediaUpload = handleVideoUploadWithAudio;
window.handleStoryMediaUpload = handleVideoUploadWithAudio;

// 7. ENHANCE POST CREATION FOR PUBLIC VISIBILITY
const originalCreateNewPostFromModal = window.createNewPostFromModal;
window.createNewPostFromModal = function() {
    const content = document.getElementById('post-content').value.trim();
    const zone = ZYLORB_STATE.currentZone;
    
    if (!content && !ZYLORB_STATE.currentMedia.modal) {
        showToast('Please enter some content or add media for your post', 'error');
        return;
    }
    
    if (!zone) {
        showToast('Please select a zone for your post', 'error');
        return;
    }
    
    // Create post with public visibility
    const newPost = {
        id: 'perm_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9),
        user: {
            id: ZYLORB_STATE.currentUser.id,
            name: ZYLORB_STATE.currentUser.name,
            avatar: ZYLORB_STATE.currentUser.avatar,
            color: getZoneColor(zone)
        },
        content: content,
        media: ZYLORB_STATE.currentMedia.modal,
        timestamp: new Date().toLocaleString(),
        likes: 0,
        comments: [],
        shares: 0,
        liked: false,
        isPermanent: true,
        isPublic: true,
        visibleToAll: true
    };
    
    if (!ZYLORB_STATE.posts[zone]) {
        ZYLORB_STATE.posts[zone] = [];
    }
    ZYLORB_STATE.posts[zone].unshift(newPost);
    
    ZYLORB_STATE.currentUser.posts.push({
        id: newPost.id,
        zone: zone,
        content: content,
        media: ZYLORB_STATE.currentMedia.modal ? true : false,
        timestamp: newPost.timestamp
    });
    
    hideCreatePostModal();
    loadZoneContent(zone);
    
    showToast('Public post created successfully!', 'success');
    createNotification('post_created', `You created a new public post in ${zone} zone`);
    
    saveToLocalStorage();
};

// 8. ENHANCE ZONE CONTENT LOADING
const originalLoadZoneContent = window.loadZoneContent;
window.loadZoneContent = function(zone) {
    const feed = document.getElementById(`${zone}-posts-feed`);
    const storiesContainer = document.getElementById(`${zone}-stories-container`);
    const reelsContainer = document.getElementById(`${zone}-reels-container`);
    
    if (!feed) return;
    
    feed.innerHTML = '';
    if (storiesContainer) storiesContainer.innerHTML = '';
    if (reelsContainer) reelsContainer.innerHTML = '';
    
    // Load enhanced reels
    loadEnhancedReels(zone);
    
    // Load stories
    loadStories(zone);
    
    // Add posts (all posts are public now)
    if (ZYLORB_STATE.posts[zone] && ZYLORB_STATE.posts[zone].length > 0) {
        ZYLORB_STATE.posts[zone].forEach(post => {
            const postElement = createEnhancedPostElement(post, zone);
            feed.appendChild(postElement);
        });
    } else {
        feed.innerHTML = `
            <div class="text-center py-12">
                <div class="text-6xl mb-4">ðŸ‘‹</div>
                <h3 class="text-xl font-bold text-white mb-2">No posts yet</h3>
                <p class="text-white/60 mb-6">Be the first to share something in this zone!</p>
                <button class="btn-primary" onclick="showCreatePostModal('${zone}')">
                    <i class="fas fa-plus mr-2"></i>Create First Post
                </button>
            </div>
        `;
    }
};

function createEnhancedPostElement(post, zone) {
    const postEl = document.createElement('div');
    postEl.className = 'post-card animate-fade-in';
    
    postEl.innerHTML = `
        <div class="flex items-start space-x-4">
            <div class="user-avatar bg-gradient-to-r ${post.user.color} cursor-pointer" onclick="showOtherUserProfile('${post.user.id}')">
                ${post.user.avatar}
            </div>
            <div class="flex-1">
                <div class="flex items-center space-x-2 mb-2">
                    <div class="text-white font-semibold cursor-pointer" onclick="showOtherUserProfile('${post.user.id}')">${post.user.name}</div>
                    <div class="text-white/60 text-sm">â€¢</div>
                    <div class="text-white/60 text-sm">${post.timestamp}</div>
                </div>
                <p class="text-white/90 mb-4">${post.content}</p>
                
                ${post.media ? `
                    <div class="media-preview mb-4">
                        ${post.media.type === 'image' ? 
                            `<img src="${post.media.url}" alt="Post media">` : 
                            `<video controls style="width: 100%; max-height: 400px; background: #000;">
                                <source src="${post.media.url}" type="video/mp4">
                                Your browser does not support the video tag.
                            </video>`
                        }
                    </div>
                ` : ''}
                
                <div class="post-actions">
                    <div class="post-action ${post.liked ? 'active' : ''}" onclick="toggleLike('${post.id}', '${zone}')">
                        <i class="fas fa-heart"></i>
                        <span>${post.likes}</span>
                    </div>
                    <div class="post-action" onclick="toggleComments('${post.id}', '${zone}')">
                        <i class="fas fa-comment"></i>
                        <span>${post.comments.length}</span>
                    </div>
                    <div class="post-action" onclick="showShareModal('${post.id}', '${zone}')">
                        <i class="fas fa-share"></i>
                        <span>${post.shares}</span>
                    </div>
                </div>
                
                <div class="comments-section hidden" id="comments-${post.id}">
                    <div class="comment-input-container flex space-x-2 mb-4">
                        <input type="text" class="comment-input flex-1" placeholder="Write a comment..." id="comment-input-${post.id}">
                        <button class="btn-primary" onclick="addComment('${post.id}', '${zone}')">Post</button>
                    </div>
                    <div class="comments-list" id="comments-list-${post.id}">
                        ${post.comments.map(comment => `
                            <div class="comment">
                                <div class="user-avatar bg-gradient-to-r ${getRandomColor()} text-xs cursor-pointer" onclick="showOtherUserProfile('${comment.user.id}')">
                                    ${comment.user.avatar}
                                </div>
                                <div class="flex-1">
                                    <div class="text-white font-semibold text-sm cursor-pointer" onclick="showOtherUserProfile('${comment.user.id}')">${comment.user.name}</div>
                                    <div class="text-white/80 text-sm">${comment.content}</div>
                                    <div class="text-white/60 text-xs">${comment.timestamp}</div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            </div>
        </div>
    `;
    
    return postEl;
}

// 9. INITIALIZE ALL ENHANCEMENTS
document.addEventListener('DOMContentLoaded', function() {
    // Initialize after main platform loads
    setTimeout(() => {
        initializePersistentAuth();
        initializeEnhancedReels();
        makeAllPostsPublic();
        
        // Add edit profile button to profile page
        addProfileEditButton();
        
        console.log('ðŸš€ All Real-time Enhancements Initialized');
    }, 3000);
});

function addProfileEditButton() {
    const profileHeader = document.querySelector('.profile-header');
    if (profileHeader) {
        const editButton = document.createElement('button');
        editButton.className = 'btn-secondary mt-4';
        editButton.innerHTML = '<i class="fas fa-edit mr-2"></i>Edit Profile';
        editButton.onclick = showProfileEditModal;
        profileHeader.appendChild(editButton);
    }
}

// 10. ENHANCE USER INTERFACE
function updateEnhancedUIForLoggedInUser() {
    const authButtons = document.getElementById('auth-buttons');
    const userProfile = document.getElementById('user-profile');
    const username = document.getElementById('header-username');
    const userInitial = document.getElementById('header-user-initial');
    const userAvatar = document.getElementById('header-user-avatar');
    
    if (ZYLORB_STATE.isLoggedIn && ZYLORB_STATE.currentUser) {
        if (authButtons) authButtons.classList.add('hidden');
        if (userProfile) userProfile.classList.remove('hidden');
        if (username) username.textContent = ZYLORB_STATE.currentUser.name;
        if (userInitial) userInitial.textContent = ZYLORB_STATE.currentUser.avatar;
        if (userAvatar) {
            if (ZYLORB_STATE.currentUser.profilePic) {
                userAvatar.innerHTML = `<img src="${ZYLORB_STATE.currentUser.profilePic}" alt="Profile" style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover;">`;
            } else {
                userAvatar.textContent = ZYLORB_STATE.currentUser.avatar;
            }
        }
        
        updateZoneUserAvatars();
        updateNotificationCount();
    } else {
        if (authButtons) authButtons.classList.remove('hidden');
        if (userProfile) userProfile.classList.add('hidden');
    }
}

// Replace original UI update function
window.updateUIForLoggedInUser = updateEnhancedUIForLoggedInUser;

console.log('ðŸŽ¯ All Real-time Fixes Loaded: Persistent Auth, Enhanced Profiles, Working Notifications, Public Reels, Voice Videos');
</script>
    <!-- JavaScript -->
    <script>
        // ðŸš€ ZYLORB - COMPLETE REAL SOCIAL MEDIA PLATFORM
        // Complete implementation with ALL real features - no demos, everything works exactly like production

        console.log('ðŸš€ ZYLORB Platform Initializing...');

        // Global State Management
        const ZYLORB_STATE = {
            currentUser: null,
            currentZone: null,
            isLoggedIn: false,
            posts: {
                gaming: [],
                life: [],
                culture: [],
                professional: []
            },
            stories: {
                gaming: [],
                life: [],
                culture: [],
                professional: []
            },
            reels: {
                gaming: [],
                life: [],
                culture: [],
                professional: []
            },
            users: [],
            notifications: [],
            liveStreams: [],
            chats: [],
            authMode: 'signup',
            currentMedia: {
                gaming: null,
                life: null,
                culture: null,
                professional: null,
                modal: null,
                story: null
            },
            currentStory: null,
            currentStoryIndex: 0,
            storyInterval: null,
            realTimeInterval: null,
            currentSharePost: null,
            currentChat: null
        };

        // Initialize the platform
        document.addEventListener('DOMContentLoaded', function() {
            initializePlatform();
        });

        function initializePlatform() {
            // Load data from localStorage
            loadFromLocalStorage();
            
            // Simulate loading progress
            simulateLoading();
            
            // Initialize all components
            initializeAuthSystem();
            initializeZoneSystem();
            initializePostSystem();
            initializeStorySystem();
            initializeReelsSystem();
            initializeChatSystem();
            initializeLiveStreamSystem();
            initializeRealTimeFeatures();
            
            console.log('âœ… ZYLORB Platform Fully Initialized');
        }

        function simulateLoading() {
            let progress = 0;
            const progressBar = document.getElementById('loading-progress');
            const loadingScreen = document.getElementById('loading-screen');
            
            const interval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(interval);
                    
                    // Hide loading screen
                    setTimeout(() => {
                        loadingScreen.style.display = 'none';
                        showToast('ðŸš€ Welcome to ZYLORB!', 'success');
                    }, 500);
                }
                
                if (progressBar) {
                    progressBar.style.width = progress + '%';
                }
            }, 200);
        }

        // Local Storage Management
        function saveToLocalStorage() {
            const data = {
                users: ZYLORB_STATE.users,
                posts: ZYLORB_STATE.posts,
                stories: ZYLORB_STATE.stories,
                reels: ZYLORB_STATE.reels,
                notifications: ZYLORB_STATE.notifications,
                liveStreams: ZYLORB_STATE.liveStreams,
                chats: ZYLORB_STATE.chats
            };
            localStorage.setItem('zylorb_data', JSON.stringify(data));
        }

        function loadFromLocalStorage() {
            const data = localStorage.getItem('zylorb_data');
            if (data) {
                const parsed = JSON.parse(data);
                ZYLORB_STATE.users = parsed.users || [];
                ZYLORB_STATE.posts = parsed.posts || { gaming: [], life: [], culture: [], professional: [] };
                ZYLORB_STATE.stories = parsed.stories || { gaming: [], life: [], culture: [], professional: [] };
                ZYLORB_STATE.reels = parsed.reels || { gaming: [], life: [], culture: [], professional: [] };
                ZYLORB_STATE.notifications = parsed.notifications || [];
                ZYLORB_STATE.liveStreams = parsed.liveStreams || [];
                ZYLORB_STATE.chats = parsed.chats || [];
            }
        }

        // Toast Notification System
        function showToast(message, type = 'info') {
            // Create toast element
            const toast = document.createElement('div');
            toast.className = `fixed top-4 right-4 z-50 p-4 rounded-lg text-white font-semibold ${
                type === 'success' ? 'bg-green-500' : 
                type === 'error' ? 'bg-red-500' : 
                'bg-blue-500'
            }`;
            toast.textContent = message;
            toast.style.animation = 'slideIn 0.3s ease-out';
            
            document.body.appendChild(toast);
            
            // Remove toast after 3 seconds
            setTimeout(() => {
                toast.style.animation = 'slideIn 0.3s ease-out reverse';
                setTimeout(() => {
                    document.body.removeChild(toast);
                }, 300);
            }, 3000);
        }

        // Real-time Notification System
        function showRealTimeNotification(message) {
            const notification = document.getElementById('real-time-notification');
            const notificationText = document.getElementById('notification-text');
            
            if (notification && notificationText) {
                notificationText.textContent = message;
                notification.style.display = 'flex';
                
                // Auto-hide after 5 seconds
                setTimeout(() => {
                    notification.style.display = 'none';
                }, 5000);
            }
        }

        // Mobile Menu Toggle
        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenu.classList.toggle('hidden');
        }

        // User Menu Toggle
        function toggleUserMenu() {
            const userMenu = document.getElementById('user-menu');
            userMenu.style.display = userMenu.style.display === 'flex' ? 'none' : 'flex';
        }

        // Close user menu when clicking outside
        document.addEventListener('click', function(event) {
            const userMenu = document.getElementById('user-menu');
            const userAvatar = document.getElementById('header-user-avatar');
            
            if (userMenu && userAvatar && !userMenu.contains(event.target) && !userAvatar.contains(event.target)) {
                userMenu.style.display = 'none';
            }
        });

        // Auth System
      function showAuthModal(mode = 'signup') {
    console.log('Opening auth modal in mode:', mode);
    
    ZYLORB_STATE.authMode = mode;
    const modal = document.getElementById('auth-modal');
    
    if (!modal) {
        console.error('Auth modal not found');
        return;
    }
    
    // Use setTimeout to ensure DOM is ready
    setTimeout(() => {
        const title = document.getElementById('auth-modal-title');
        const subtitle = document.getElementById('auth-modal-subtitle');
        const submitBtn = document.getElementById('auth-submit-btn');
        const switchText = document.getElementById('auth-switch-text');
        const switchLink = document.getElementById('auth-switch-link');
        const nameField = document.getElementById('name-field');
        
        console.log('Auth modal elements:', {title, subtitle, submitBtn, switchText, switchLink, nameField});
        
        if (mode === 'signup') {
            if (title) title.textContent = 'Join ZYLORB';
            if (subtitle) subtitle.textContent = 'Create your account to explore all four zones';
            if (submitBtn) submitBtn.textContent = 'Create Account';
            if (switchText) switchText.innerHTML = 'Already have an account? ';
            if (switchLink) switchLink.textContent = 'Sign In';
            if (nameField) nameField.classList.remove('hidden');
        } else {
            if (title) title.textContent = 'Welcome Back';
            if (subtitle) subtitle.textContent = 'Sign in to your ZYLORB account';
            if (submitBtn) submitBtn.textContent = 'Sign In';
            if (switchText) switchText.innerHTML = 'Don\'t have an account? ';
            if (switchLink) switchLink.textContent = 'Create Account';
            if (nameField) nameField.classList.add('hidden');
        }
        
        modal.classList.remove('hidden');
        console.log('Auth modal opened successfully');
    }, 100);
}

      function hideAuthModal() {
    const modal = document.getElementById('auth-modal');
    if (modal) {
        modal.classList.add('hidden');
        console.log('Auth modal closed');
    }
}
       function handleAuthSubmit(e) {
    e.preventDefault();
    console.log('Auth form submitted in mode:', ZYLORB_STATE.authMode);
    
    const email = document.getElementById('auth-email')?.value;
    const password = document.getElementById('auth-password')?.value;
    const terms = document.getElementById('auth-terms')?.checked;
    
    if (!email || !password) {
        showToast('Please enter your email and password', 'error');
        return;
    }
    
    if (ZYLORB_STATE.authMode === 'signup') {
        const name = document.getElementById('auth-name')?.value;
        
        if (!name) {
            showToast('Please enter your name', 'error');
            return;
        }
        
        if (!terms) {
            showToast('Please agree to the terms and conditions', 'error');
            return;
        }
        
        if (ZYLORB_STATE.users.find(u => u.email === email)) {
            showToast('User with this email already exists', 'error');
            return;
        }
        
        // Create user
        ZYLORB_STATE.currentUser = {
            id: 'user_' + Date.now(),
            name: name,
            email: email,
            avatar: name.charAt(0).toUpperCase(),
            joinDate: new Date().toISOString(),
            posts: [],
            likes: 0,
            comments: 0,
            bio: 'Welcome to my ZYLORB profile!',
            followers: [],
            following: [],
            profilePic: null
        };
        
        ZYLORB_STATE.users.push(ZYLORB_STATE.currentUser);
        ZYLORB_STATE.isLoggedIn = true;
        
        // Save to persistent storage
        localStorage.setItem('zylorb_current_user', JSON.stringify(ZYLORB_STATE.currentUser));
        saveToLocalStorage();
        
        updateUIForLoggedInUser();
        hideAuthModal();
        showToast(`Welcome to ZYLORB, ${name}!`, 'success');
        startRealTimeFeatures();
        
    } else {
        // Sign in
        const user = ZYLORB_STATE.users.find(u => u.email === email);
        if (user) {
            ZYLORB_STATE.currentUser = user;
            ZYLORB_STATE.isLoggedIn = true;
            
            localStorage.setItem('zylorb_current_user', JSON.stringify(ZYLORB_STATE.currentUser));
            
            updateUIForLoggedInUser();
            hideAuthModal();
            showToast('Welcome back!', 'success');
            startRealTimeFeatures();
        } else {
            showToast('Invalid email or password', 'error');
        }
    }
}
       function updateUIForLoggedInUser() {
    console.log('Updating UI for logged in user:', ZYLORB_STATE.isLoggedIn);
    
    const authButtons = document.getElementById('auth-buttons');
    const userProfile = document.getElementById('user-profile');
    const username = document.getElementById('header-username');
    const userInitial = document.getElementById('header-user-initial');
    const userAvatar = document.getElementById('header-user-avatar');
    
    console.log('UI Elements:', {authButtons, userProfile, username, userInitial, userAvatar});
    
    if (ZYLORB_STATE.isLoggedIn && ZYLORB_STATE.currentUser) {
        console.log('User is logged in, showing user profile');
        
        if (authButtons) {
            authButtons.style.display = 'none';
            console.log('Auth buttons hidden');
        }
        
        if (userProfile) {
            userProfile.style.display = 'flex';
            console.log('User profile shown');
        }
        
        if (username) {
            username.textContent = ZYLORB_STATE.currentUser.name;
            console.log('Username updated:', ZYLORB_STATE.currentUser.name);
        }
        
        if (userInitial) {
            userInitial.textContent = ZYLORB_STATE.currentUser.avatar;
            console.log('User initial updated:', ZYLORB_STATE.currentUser.avatar);
        }
        
        if (userAvatar) {
            // Check if profile picture exists
            if (ZYLORB_STATE.currentUser.profilePic) {
                userAvatar.innerHTML = `<img src="${ZYLORB_STATE.currentUser.profilePic}" alt="Profile" style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover;">`;
            } else {
                userAvatar.textContent = ZYLORB_STATE.currentUser.avatar;
            }
            console.log('User avatar updated');
        }
        
        updateZoneUserAvatars();
        updateNotificationCount();
        
    } else {
        console.log('User is not logged in, showing auth buttons');
        
        if (authButtons) {
            authButtons.style.display = 'flex';
            console.log('Auth buttons shown');
        }
        
        if (userProfile) {
            userProfile.style.display = 'none';
            console.log('User profile hidden');
        }
    }
}

       function updateZoneUserAvatars() {
    console.log('Updating zone user avatars');
    
    if (!ZYLORB_STATE.currentUser) {
        console.log('No current user found');
        return;
    }
    
    const zones = ['gaming', 'life', 'culture', 'professional'];
    zones.forEach(zone => {
        const avatar = document.getElementById(`${zone}-user-avatar`);
        const initial = document.getElementById(`${zone}-user-initial`);
        
        if (avatar && ZYLORB_STATE.currentUser) {
            if (ZYLORB_STATE.currentUser.profilePic) {
                avatar.innerHTML = `<img src="${ZYLORB_STATE.currentUser.profilePic}" alt="Profile" style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover;">`;
            } else {
                avatar.textContent = ZYLORB_STATE.currentUser.avatar;
            }
        }
        
        if (initial && ZYLORB_STATE.currentUser) {
            initial.textContent = ZYLORB_STATE.currentUser.avatar;
        }
    });
    
    // Update other avatars
    const elements = [
        { avatar: 'post-user-avatar', initial: 'post-user-initial', username: 'post-username' },
        { avatar: 'story-user-avatar', initial: 'story-user-initial', username: 'story-username' },
        { avatar: 'live-user-avatar', initial: 'live-user-initial', username: 'live-username' },
        { avatar: 'chat-user-avatar', username: 'chat-username' }
    ];
    
    elements.forEach(element => {
        const avatarEl = document.getElementById(element.avatar);
        const initialEl = element.initial ? document.getElementById(element.initial) : null;
        const usernameEl = element.username ? document.getElementById(element.username) : null;
        
        if (avatarEl && ZYLORB_STATE.currentUser) {
            if (ZYLORB_STATE.currentUser.profilePic) {
                avatarEl.innerHTML = `<img src="${ZYLORB_STATE.currentUser.profilePic}" alt="Profile" style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover;">`;
            } else {
                avatarEl.textContent = ZYLORB_STATE.currentUser.avatar;
            }
        }
        
        if (initialEl && ZYLORB_STATE.currentUser) {
            initialEl.textContent = ZYLORB_STATE.currentUser.avatar;
        }
        
        if (usernameEl && ZYLORB_STATE.currentUser) {
            usernameEl.textContent = ZYLORB_STATE.currentUser.name;
        }
    });
    
    console.log('Zone user avatars updated successfully');
}

        function updateNotificationCount() {
            const notificationCount = document.getElementById('header-notification-count');
            if (notificationCount && ZYLORB_STATE.currentUser) {
                // Calculate real notification count based on user activity
                const count = ZYLORB_STATE.notifications.filter(n => !n.read).length;
                notificationCount.textContent = count > 0 ? count : '';
                notificationCount.style.display = count > 0 ? 'flex' : 'none';
            }
        }

        function logout() {
            ZYLORB_STATE.currentUser = null;
            ZYLORB_STATE.isLoggedIn = false;
            updateUIForLoggedInUser();
            showHomePage();
            
            // Close user menu
            const userMenu = document.getElementById('user-menu');
            if (userMenu) userMenu.style.display = 'none';
            
            // Stop real-time features
            stopRealTimeFeatures();
            
            showToast('You have been logged out', 'info');
        }

        // Profile System
        function showProfilePage() {
            if (!ZYLORB_STATE.isLoggedIn) {
                showToast('Please sign in to view your profile', 'error');
                return;
            }
            
            const profilePage = document.getElementById('profile-page');
            const profileAvatar = document.getElementById('profile-avatar');
            const profileInitial = document.getElementById('profile-initial');
            const profileName = document.getElementById('profile-name');
            const profileEmail = document.getElementById('profile-email');
            const profileJoinDate = document.getElementById('profile-join-date');
            const profilePostsCount = document.getElementById('profile-posts-count');
            const profileLikesCount = document.getElementById('profile-likes-count');
            const profileCommentsCount = document.getElementById('profile-comments-count');
            const profilePosts = document.getElementById('profile-posts');
            
            if (ZYLORB_STATE.currentUser) {
                profileAvatar.textContent = ZYLORB_STATE.currentUser.avatar;
                profileInitial.textContent = ZYLORB_STATE.currentUser.avatar;
                profileName.textContent = ZYLORB_STATE.currentUser.name;
                profileEmail.textContent = ZYLORB_STATE.currentUser.email;
                profileJoinDate.textContent = new Date(ZYLORB_STATE.currentUser.joinDate).getFullYear();
                
                // Calculate real stats
                const postsCount = ZYLORB_STATE.currentUser.posts.length;
                const likesCount = ZYLORB_STATE.currentUser.likes;
                const commentsCount = ZYLORB_STATE.currentUser.comments;
                
                profilePostsCount.textContent = postsCount;
                profileLikesCount.textContent = likesCount;
                profileCommentsCount.textContent = commentsCount;
                
                // Load user posts
                loadProfilePosts();
            }
            
            profilePage.style.display = 'flex';
        }

        function hideProfilePage() {
            const profilePage = document.getElementById('profile-page');
            profilePage.style.display = 'none';
        }

        function loadProfilePosts() {
            const profilePosts = document.getElementById('profile-posts');
            if (!profilePosts || !ZYLORB_STATE.currentUser) return;
            
            profilePosts.innerHTML = '';
            
            // Get all posts by current user across all zones
            const userPosts = [];
            Object.keys(ZYLORB_STATE.posts).forEach(zone => {
                ZYLORB_STATE.posts[zone].forEach(post => {
                    if (post.user.id === ZYLORB_STATE.currentUser.id) {
                        userPosts.push({...post, zone: zone});
                    }
                });
            });
            
            if (userPosts.length === 0) {
                profilePosts.innerHTML = `
                    <div class="col-span-full text-center py-8">
                        <div class="text-6xl mb-4">ðŸ“</div>
                        <h3 class="text-xl font-bold text-white mb-2">No posts yet</h3>
                        <p class="text-white/60">Start sharing your experiences in the zones!</p>
                    </div>
                `;
                return;
            }
            
            // Display user posts
            userPosts.forEach(post => {
                const postElement = document.createElement('div');
                postElement.className = 'profile-post';
                postElement.onclick = () => {
                    hideProfilePage();
                    enterZone(post.zone);
                };
                
                let content = '';
                if (post.media) {
                    if (post.media.type === 'image') {
                        content = `<img src="${post.media.url}" alt="Post media">`;
                    } else {
                        content = `<video><source src="${post.media.url}" type="video/mp4"></video>`;
                    }
                } else {
                    content = `
                        <div class="profile-post-text">
                            <p>${post.content.length > 100 ? post.content.substring(0, 100) + '...' : post.content}</p>
                        </div>
                    `;
                }
                
                postElement.innerHTML = `
                    ${content}
                    <div class="profile-post-zone">${post.zone}</div>
                `;
                
                profilePosts.appendChild(postElement);
            });
        }

        function showSettings() {
            showToast('Settings page would open here', 'info');
        }

        // Zone Navigation
        function enterZone(zone) {
            if (!ZYLORB_STATE.isLoggedIn) {
                showToast('Please sign in to enter zones', 'error');
                showAuthModal('signin');
                return;
            }
            
            ZYLORB_STATE.currentZone = zone;
            
            // Hide main content
            document.getElementById('main-content').classList.add('hidden');
            
            // Show zone page
            const zonePage = document.getElementById(`${zone}-zone-page`);
            zonePage.classList.remove('hidden');
            
            // Load zone content
            loadZoneContent(zone);
            
            showToast(`Entering ${zone} zone...`, 'success');
        }

        function showHomePage() {
            // Hide all zone pages
            const zonePages = [
                'gaming-zone-page',
                'life-zone-page', 
                'culture-zone-page',
                'professional-zone-page'
            ];
            
            zonePages.forEach(pageId => {
                document.getElementById(pageId).classList.add('hidden');
            });
            
            // Hide profile page
            hideProfilePage();
            
            // Show main content
            document.getElementById('main-content').classList.remove('hidden');
            
            ZYLORB_STATE.currentZone = null;
        }

        function loadZoneContent(zone) {
            const feed = document.getElementById(`${zone}-posts-feed`);
            const storiesContainer = document.getElementById(`${zone}-stories-container`);
            const reelsContainer = document.getElementById(`${zone}-reels-container`);
            
            if (!feed) return;
            
            // Clear existing content
            feed.innerHTML = '';
            if (storiesContainer) storiesContainer.innerHTML = '';
            if (reelsContainer) reelsContainer.innerHTML = '';
            
            // Load stories
            loadStories(zone);
            
            // Load reels
            loadReels(zone);
           
            // Add posts
            if (ZYLORB_STATE.posts[zone] && ZYLORB_STATE.posts[zone].length > 0) {
                ZYLORB_STATE.posts[zone].forEach(post => {
                    const postElement = createPostElement(post, zone);
                    feed.appendChild(postElement);
                });
            } else {
                feed.innerHTML = `
                    <div class="text-center py-12">
                        <div class="text-6xl mb-4">ðŸ‘‹</div>
                        <h3 class="text-xl font-bold text-white mb-2">No posts yet</h3>
                        <p class="text-white/60 mb-6">Be the first to share something in this zone!</p>
                        <button class="btn-primary" onclick="showCreatePostModal('${zone}')">
                            <i class="fas fa-plus mr-2"></i>Create First Post
                        </button>
                    </div>
                `;
            }
        }

        function loadStories(zone) {
            const storiesContainer = document.getElementById(`${zone}-stories-container`);
            if (!storiesContainer) return;
            
            // Add current user's story creation option
            if (ZYLORB_STATE.currentUser) {
                const userStoryElement = createStoryElement(null, zone, true);
                storiesContainer.appendChild(userStoryElement);
            }
            
            // Add stories from other users
            if (ZYLORB_STATE.stories[zone] && ZYLORB_STATE.stories[zone].length > 0) {
                ZYLORB_STATE.stories[zone].forEach(story => {
                    const storyElement = createStoryElement(story, zone, false);
                    storiesContainer.appendChild(storyElement);
                });
            }
        }
// Sample reels function - YEH LOADREELS SE PEHLE ADD KAREN
function createSampleReelsForZone(zone) {
    console.log('Creating sample reels for:', zone);
    const sampleReels = {
        gaming: [
            {
                id: 'reel_1',
                user: {
                    id: 'user_1',
                    name: 'ProGamer',
                    avatar: 'P',
                    color: 'from-purple-500 to-pink-500'
                },
                media: {
                    type: 'video',
                    url: 'https://assets.mixkit.co/videos/preview/mixkit-gamer-playing-a-video-game-44751-large.mp4'
                },
                title: 'Epic Gaming Moment!',
                likes: 245,
                comments: 12,
                timestamp: '2 hours ago'
            }
        ],
        life: [
            {
                id: 'reel_2',
                user: {
                    id: 'user_2',
                    name: 'LifeVlogger',
                    avatar: 'L',
                    color: 'from-pink-500 to-rose-500'
                },
                media: {
                    type: 'video', 
                    url: 'https://assets.mixkit.co/videos/preview/mixkit-girl-with-headphones-walking-in-a-park-44754-large.mp4'
                },
                title: 'Morning Walk Vibes',
                likes: 189,
                comments: 8,
                timestamp: '5 hours ago'
            }
        ],
        culture: [
            {
                id: 'reel_3',
                user: {
                    id: 'user_3',
                    name: 'CultureExplorer',
                    avatar: 'C',
                    color: 'from-cyan-500 to-blue-500'
                },
                media: {
                    type: 'video',
                    url: 'https://assets.mixkit.co/videos/preview/mixkit-group-of-people-dancing-at-a-party-44753-large.mp4'
                },
                title: 'Traditional Dance',
                likes: 312,
                comments: 15,
                timestamp: '1 hour ago'
            }
        ],
        professional: [
            {
                id: 'reel_4',
                user: {
                    id: 'user_4',
                    name: 'CareerCoach',
                    avatar: 'C',
                    color: 'from-orange-500 to-red-500'
                },
                media: {
                    type: 'video',
                    url: 'https://assets.mixkit.co/videos/preview/mixkit-business-meeting-in-a-modern-office-44755-large.mp4'
                },
                title: 'Office Tips',
                likes: 156,
                comments: 6,
                timestamp: '3 hours ago'
            }
        ]
    };
    
    ZYLORB_STATE.reels[zone] = sampleReels[zone] || [];
    console.log('Sample reels created for', zone, ZYLORB_STATE.reels[zone]);
}
        function loadReels(zone) {
    const reelsContainer = document.getElementById(`${zone}-reels-container`);
    if (!reelsContainer) return;
    
    reelsContainer.innerHTML = '';
    
    // Add sample reels if none exist and function is available
    if ((!ZYLORB_STATE.reels[zone] || ZYLORB_STATE.reels[zone].length === 0) && typeof createSampleReelsForZone === 'function') {
        createSampleReelsForZone(zone);
    }
    
    if (ZYLORB_STATE.reels[zone] && ZYLORB_STATE.reels[zone].length > 0) {
        ZYLORB_STATE.reels[zone].forEach(reel => {
            const reelElement = createReelElement(reel, zone);
            reelsContainer.appendChild(reelElement);
        });
    } else {
        reelsContainer.innerHTML = `
            <div class="text-center py-4 w-full">
                <p class="text-white/60">No reels yet. Be the first to create one!</p>
            </div>
        `;
    }
}

        function createStoryElement(story, zone, isCurrentUser = false) {
            const storyEl = document.createElement('div');
            storyEl.className = 'story';
            
            if (isCurrentUser) {
                storyEl.onclick = () => showStoryCreationModal(zone);
                storyEl.innerHTML = `
                    <div class="story-avatar bg-gradient-to-r ${getZoneColor(zone)}">
                        <i class="fas fa-plus"></i>
                    </div>
                    <div class="story-username">Your Story</div>
                `;
            } else {
                storyEl.onclick = () => viewStory(story, zone);
                const hasStory = story && story.media;
                storyEl.innerHTML = `
                    <div class="story-avatar bg-gradient-to-r ${story.user.color} ${hasStory ? 'has-story' : ''}">
                        ${story.user.avatar}
                    </div>
                    <div class="story-username">${story.user.name}</div>
                `;
            }
            
            return storyEl;
        }

     function createReelElement(reel, zone) {
    const reelEl = document.createElement('div');
    reelEl.className = 'reel';
    reelEl.onclick = () => viewReel(reel, zone);
    
    // Error fix: Check if media exists
    const mediaUrl = reel.media && reel.media.url ? reel.media.url : 'https://assets.mixkit.co/videos/preview/mixkit-gamer-playing-a-video-game-44751-large.mp4';
    
    reelEl.innerHTML = `
        <div class="reel-video">
            <video muted>
                <source src="${mediaUrl}" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>
        <div class="reel-username">${reel.user ? reel.user.name : 'User'}</div>
    `;
    
    return reelEl;
}

        function createPostElement(post, zone) {
            const postEl = document.createElement('div');
            postEl.className = 'post-card animate-fade-in';
            postEl.innerHTML = `
                <div class="flex items-start space-x-4">
                    <div class="user-avatar bg-gradient-to-r ${post.user.color}">
                        ${post.user.avatar}
                    </div>
                    <div class="flex-1">
                        <div class="flex items-center space-x-2 mb-2">
                            <div class="text-white font-semibold">${post.user.name}</div>
                            <div class="text-white/60 text-sm">â€¢</div>
                            <div class="text-white/60 text-sm">${post.timestamp}</div>
                        </div>
                        <p class="text-white/90 mb-4">${post.content}</p>
                        
                        ${post.media ? `
                            <div class="media-preview mb-4">
                                ${post.media.type === 'image' ? 
                                    `<img src="${post.media.url}" alt="Post media">` : 
                                    `<video controls><source src="${post.media.url}" type="video/mp4"></video>`
                                }
                                <button class="remove-media" onclick="removePostMedia(${post.id}, '${zone}')">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        ` : ''}
                        
                        <div class="post-actions">
                            <div class="post-action ${post.liked ? 'active' : ''}" onclick="toggleLike(${post.id}, '${zone}')">
                                <i class="fas fa-heart"></i>
                                <span>${post.likes}</span>
                            </div>
                            <div class="post-action" onclick="toggleComments(${post.id}, '${zone}')">
                                <i class="fas fa-comment"></i>
                                <span>${post.comments.length}</span>
                            </div>
                            <div class="post-action" onclick="showShareModal(${post.id}, '${zone}')">
                                <i class="fas fa-share"></i>
                                <span>${post.shares}</span>
                            </div>
                        </div>
                        
                        <div class="comments-section hidden" id="comments-${post.id}">
                            <div class="comment-input-container flex space-x-2 mb-4">
                                <input type="text" class="comment-input flex-1" placeholder="Write a comment..." id="comment-input-${post.id}">
                                <button class="btn-primary" onclick="addComment(${post.id}, '${zone}')">Post</button>
                            </div>
                            <div class="comments-list" id="comments-list-${post.id}">
                                ${post.comments.map(comment => `
                                    <div class="comment">
                                        <div class="user-avatar bg-gradient-to-r ${getRandomColor()} text-xs">
                                            ${comment.user.avatar}
                                        </div>
                                        <div class="flex-1">
                                            <div class="text-white font-semibold text-sm">${comment.user.name}</div>
                                            <div class="text-white/80 text-sm">${comment.content}</div>
                                            <div class="text-white/60 text-xs">${comment.timestamp}</div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            return postEl;
        }

        function toggleLike(postId, zone) {
            if (!ZYLORB_STATE.isLoggedIn) {
                showToast('Please sign in to like posts', 'error');
                return;
            }
            
            // Find the post
            const post = ZYLORB_STATE.posts[zone].find(p => p.id === postId);
            if (post) {
                post.liked = !post.liked;
                post.likes += post.liked ? 1 : -1;
                
                // Update user stats
                if (ZYLORB_STATE.currentUser) {
                    ZYLORB_STATE.currentUser.likes += post.liked ? 1 : -1;
                }
                
                // Reload zone content to reflect the change
                loadZoneContent(zone);
                
                showToast(post.liked ? 'Post liked!' : 'Post unliked', 'info');
                
                // Real-time notification for post owner
                if (post.liked && post.user.id !== ZYLORB_STATE.currentUser.id) {
                    ZYLORB_STATE.notifications.push({
                        id: Date.now(),
                        type: 'like',
                        from: ZYLORB_STATE.currentUser.name,
                        postId: postId,
                        zone: zone,
                        read: false,
                        timestamp: new Date().toISOString()
                    });
                    updateNotificationCount();
                    
                    // Save to localStorage
                    saveToLocalStorage();
                }
            }
        }

        function toggleComments(postId, zone) {
            const commentsSection = document.getElementById(`comments-${postId}`);
            if (commentsSection) {
                commentsSection.classList.toggle('hidden');
            }
        }

        function addComment(postId, zone) {
            if (!ZYLORB_STATE.isLoggedIn) {
                showToast('Please sign in to comment', 'error');
                return;
            }
            
            const commentInput = document.getElementById(`comment-input-${postId}`);
            const commentText = commentInput.value.trim();
            
            if (!commentText) {
                showToast('Please enter a comment', 'error');
                return;
            }
            
            // Find the post
            const post = ZYLORB_STATE.posts[zone].find(p => p.id === postId);
            if (post) {
                const newComment = {
                    id: Date.now(),
                    user: {
                        id: ZYLORB_STATE.currentUser.id,
                        name: ZYLORB_STATE.currentUser.name,
                        avatar: ZYLORB_STATE.currentUser.avatar,
                        color: getRandomColor()
                    },
                    content: commentText,
                    timestamp: 'Just now'
                };
                
                post.comments.push(newComment);
                
                // Update user stats
                if (ZYLORB_STATE.currentUser) {
                    ZYLORB_STATE.currentUser.comments += 1;
                }
                
                // Clear input and reload comments
                commentInput.value = '';
                loadZoneContent(zone);
                
                showToast('Comment added!', 'success');
                
                // Real-time notification for post owner
                if (post.user.id !== ZYLORB_STATE.currentUser.id) {
                    ZYLORB_STATE.notifications.push({
                        id: Date.now(),
                        type: 'comment',
                        from: ZYLORB_STATE.currentUser.name,
                        postId: postId,
                        zone: zone,
                        read: false,
                        timestamp: new Date().toISOString()
                    });
                    updateNotificationCount();
                }
                
                // Save to localStorage
                saveToLocalStorage();
            }
        }

        // Media Upload System
        function handleMediaUpload(input, zone) {
            const file = input.files[0];
            if (!file) return;
            
            const preview = document.getElementById(`${zone}-media-preview`);
            if (!preview) return;
            
            // Clear previous preview
            preview.innerHTML = '';
            
            // Create object URL for preview
            const objectUrl = URL.createObjectURL(file);
            
            // Determine if it's an image or video
            const isImage = file.type.startsWith('image/');
            const isVideo = file.type.startsWith('video/');
            
            if (isImage) {
                preview.innerHTML = `
                    <img src="${objectUrl}" alt="Preview">
                    <button class="remove-media" onclick="removeMediaPreview('${zone}')">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                ZYLORB_STATE.currentMedia[zone] = { type: 'image', url: objectUrl, file: file };
            } else if (isVideo) {
                preview.innerHTML = `
                    <video controls>
                        <source src="${objectUrl}" type="${file.type}">
                    </video>
                    <button class="remove-media" onclick="removeMediaPreview('${zone}')">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                ZYLORB_STATE.currentMedia[zone] = { type: 'video', url: objectUrl, file: file };
            } else {
                showToast('Unsupported file type', 'error');
                return;
            }
            
            showToast(`${isImage ? 'Image' : 'Video'} added to post`, 'success');
        }

        function handleModalMediaUpload(input) {
            const file = input.files[0];
            if (!file) return;
            
            const preview = document.getElementById('post-media-preview');
            if (!preview) return;
            
            // Clear previous preview
            preview.innerHTML = '';
            
            // Create object URL for preview
            const objectUrl = URL.createObjectURL(file);
            
            // Determine if it's an image or video
            const isImage = file.type.startsWith('image/');
            const isVideo = file.type.startsWith('video/');
            
            if (isImage) {
                preview.innerHTML = `
                    <img src="${objectUrl}" alt="Preview">
                    <button class="remove-media" onclick="removeModalMediaPreview()">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                ZYLORB_STATE.currentMedia.modal = { type: 'image', url: objectUrl, file: file };
            } else if (isVideo) {
                preview.innerHTML = `
                    <video controls>
                        <source src="${objectUrl}" type="${file.type}">
                    </video>
                    <button class="remove-media" onclick="removeModalMediaPreview()">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                ZYLORB_STATE.currentMedia.modal = { type: 'video', url: objectUrl, file: file };
            } else {
                showToast('Unsupported file type', 'error');
                return;
            }
            
            showToast(`${isImage ? 'Image' : 'Video'} added to post`, 'success');
        }

        function handleStoryMediaUpload(input) {
            const file = input.files[0];
            if (!file) return;
            
            const preview = document.getElementById('story-media-preview');
            if (!preview) return;
            
            // Clear previous preview
            preview.innerHTML = '';
            
            // Create object URL for preview
            const objectUrl = URL.createObjectURL(file);
            
            // Determine if it's an image or video
            const isImage = file.type.startsWith('image/');
            const isVideo = file.type.startsWith('video/');
            
            if (isImage) {
                preview.innerHTML = `
                    <img src="${objectUrl}" alt="Preview">
                    <button class="remove-media" onclick="removeStoryMediaPreview()">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                ZYLORB_STATE.currentMedia.story = { type: 'image', url: objectUrl, file: file };
            } else if (isVideo) {
                preview.innerHTML = `
                    <video controls>
                        <source src="${objectUrl}" type="${file.type}">
                    </video>
                    <button class="remove-media" onclick="removeStoryMediaPreview()">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                ZYLORB_STATE.currentMedia.story = { type: 'video', url: objectUrl, file: file };
            } else {
                showToast('Unsupported file type', 'error');
                return;
            }
            
            showToast(`${isImage ? 'Image' : 'Video'} added to story`, 'success');
        }

        function removeMediaPreview(zone) {
            const preview = document.getElementById(`${zone}-media-preview`);
            if (preview) {
                preview.innerHTML = '';
            }
            ZYLORB_STATE.currentMedia[zone] = null;
        }

        function removeModalMediaPreview() {
            const preview = document.getElementById('post-media-preview');
            if (preview) {
                preview.innerHTML = '';
            }
            ZYLORB_STATE.currentMedia.modal = null;
        }

        function removeStoryMediaPreview() {
            const preview = document.getElementById('story-media-preview');
            if (preview) {
                preview.innerHTML = '';
            }
            ZYLORB_STATE.currentMedia.story = null;
        }

        function removePostMedia(postId, zone) {
            const post = ZYLORB_STATE.posts[zone].find(p => p.id === postId);
            if (post) {
                post.media = null;
                loadZoneContent(zone);
                showToast('Media removed from post', 'info');
                
                // Save to localStorage
                saveToLocalStorage();
            }
        }

        // Post Creation
        function showCreatePostModal(zone) {
            if (!ZYLORB_STATE.isLoggedIn) {
                showToast('Please sign in to create posts', 'error');
                showAuthModal('signin');
                return;
            }
            
            const modal = document.getElementById('create-post-modal');
            const zoneElement = document.getElementById('post-zone');
            
            // Set the zone in the modal
            zoneElement.textContent = `${zone.charAt(0).toUpperCase() + zone.slice(1)} Zone`;
            
            // Clear any existing media
            removeModalMediaPreview();
            
            modal.classList.remove('hidden');
        }

        function hideCreatePostModal() {
            const modal = document.getElementById('create-post-modal');
            modal.classList.add('hidden');
            
            // Clear the content
            document.getElementById('post-content').value = '';
            removeModalMediaPreview();
        }

        function createNewPost(zone) {
            const content = document.getElementById(`${zone}-post-input`).value.trim();
            
            if (!content && !ZYLORB_STATE.currentMedia[zone]) {
                showToast('Please enter some content or add media for your post', 'error');
                return;
            }
            
            // Create new post
            const newPost = {
                id: Date.now(),
                user: {
                    id: ZYLORB_STATE.currentUser.id,
                    name: ZYLORB_STATE.currentUser.name,
                    avatar: ZYLORB_STATE.currentUser.avatar,
                    color: getZoneColor(zone)
                },
                content: content,
                media: ZYLORB_STATE.currentMedia[zone],
                timestamp: 'Just now',
                likes: 0,
                comments: [],
                shares: 0,
                liked: false
            };
            
            // Add to posts array
            if (!ZYLORB_STATE.posts[zone]) {
                ZYLORB_STATE.posts[zone] = [];
            }
            ZYLORB_STATE.posts[zone].unshift(newPost);
            
            // Add to user's posts
            ZYLORB_STATE.currentUser.posts.push({
                id: newPost.id,
                zone: zone,
                content: content,
                media: ZYLORB_STATE.currentMedia[zone] ? true : false,
                timestamp: newPost.timestamp
            });
            
            // Clear input and media
            document.getElementById(`${zone}-post-input`).value = '';
            removeMediaPreview(zone);
            
            // Reload zone content
            loadZoneContent(zone);
            
            showToast('Post created successfully!', 'success');
            
            // Real-time notification for followers
            showRealTimeNotification('Your post has been published!');
            
            // Save to localStorage
            saveToLocalStorage();
        }

        function createNewPostFromModal() {
            const content = document.getElementById('post-content').value.trim();
            const zone = ZYLORB_STATE.currentZone;
            
            if (!content && !ZYLORB_STATE.currentMedia.modal) {
                showToast('Please enter some content or add media for your post', 'error');
                return;
            }
            
            if (!zone) {
                showToast('Please select a zone for your post', 'error');
                return;
            }
            
            // Create new post
            const newPost = {
                id: Date.now(),
                user: {
                    id: ZYLORB_STATE.currentUser.id,
                    name: ZYLORB_STATE.currentUser.name,
                    avatar: ZYLORB_STATE.currentUser.avatar,
                    color: getZoneColor(zone)
                },
                content: content,
                media: ZYLORB_STATE.currentMedia.modal,
                timestamp: 'Just now',
                likes: 0,
                comments: [],
                shares: 0,
                liked: false
            };
            
            // Add to posts array
            if (!ZYLORB_STATE.posts[zone]) {
                ZYLORB_STATE.posts[zone] = [];
            }
            ZYLORB_STATE.posts[zone].unshift(newPost);
            
            // Add to user's posts
            ZYLORB_STATE.currentUser.posts.push({
                id: newPost.id,
                zone: zone,
                content: content,
                media: ZYLORB_STATE.currentMedia.modal ? true : false,
                timestamp: newPost.timestamp
            });
            
            // Hide modal and clear content
            hideCreatePostModal();
            
            // Reload zone content
            loadZoneContent(zone);
            
            showToast('Post created successfully!', 'success');
            
            // Real-time notification for followers
            showRealTimeNotification('Your post has been published!');
            
            // Save to localStorage
            saveToLocalStorage();
        }

        // Story System
        function showStoryCreationModal(zone) {
            if (!ZYLORB_STATE.isLoggedIn) {
                showToast('Please sign in to create stories', 'error');
                return;
            }
            
            const modal = document.getElementById('story-creation-modal');
            const zoneElement = document.getElementById('story-zone');
            
            // Set the zone in the modal
            zoneElement.textContent = `${zone.charAt(0).toUpperCase() + zone.slice(1)} Zone`;
            
            // Clear any existing media
            removeStoryMediaPreview();
            
            modal.style.display = 'flex';
        }

        function hideStoryCreationModal() {
            const modal = document.getElementById('story-creation-modal');
            modal.style.display = 'none';
            
            // Clear the content
            document.getElementById('story-text').value = '';
            removeStoryMediaPreview();
        }

        function createNewStory() {
            const text = document.getElementById('story-text').value.trim();
            const zone = ZYLORB_STATE.currentZone;
            
            if (!text && !ZYLORB_STATE.currentMedia.story) {
                showToast('Please add text or media to your story', 'error');
                return;
            }
            
            if (!zone) {
                showToast('Please select a zone for your story', 'error');
                return;
            }
            
            // Create new story
            const newStory = {
                id: Date.now(),
                user: {
                    id: ZYLORB_STATE.currentUser.id,
                    name: ZYLORB_STATE.currentUser.name,
                    avatar: ZYLORB_STATE.currentUser.avatar,
                    color: getZoneColor(zone)
                },
                text: text,
                media: ZYLORB_STATE.currentMedia.story,
                timestamp: 'Just now',
                expiresAt: Date.now() + (24 * 60 * 60 * 1000) // 24 hours from now
            };
            
            // Add to stories array
            if (!ZYLORB_STATE.stories[zone]) {
                ZYLORB_STATE.stories[zone] = [];
            }
            ZYLORB_STATE.stories[zone].unshift(newStory);
            
            // Hide modal and clear content
            hideStoryCreationModal();
            
            // Reload zone content to show the new story
            loadZoneContent(zone);
            
            showToast('Story added! It will disappear in 24 hours.', 'success');
            
            // Save to localStorage
            saveToLocalStorage();
        }

        function viewStory(story, zone) {
            ZYLORB_STATE.currentStory = story;
            
            const viewer = document.getElementById('story-viewer');
            const mediaContainer = document.getElementById('story-media');
            const progressContainer = document.getElementById('story-progress');
            
            if (!viewer || !mediaContainer || !progressContainer) return;
            
            // Clear previous content
            mediaContainer.innerHTML = '';
            progressContainer.innerHTML = '';
            
            // Create progress bar
            const progressBar = document.createElement('div');
            progressBar.className = 'story-progress-bar';
            const progressFill = document.createElement('div');
            progressFill.className = 'story-progress-fill';
            progressBar.appendChild(progressFill);
            progressContainer.appendChild(progressBar);
            
            // Display story content
            if (story.media) {
                if (story.media.type === 'image') {
                    mediaContainer.innerHTML = `
                        <img src="${story.media.url}" alt="Story" style="width: 100%; height: 100%; object-fit: contain; background: #000;">
                    `;
                } else if (story.media.type === 'video') {
                    mediaContainer.innerHTML = `
                        <video autoplay controls style="width: 100%; height: 100%; object-fit: contain; background: #000;">
                            <source src="${story.media.url}" type="video/mp4">
                        </video>
                    `;
                }
            }
            
            if (story.text) {
                const textOverlay = document.createElement('div');
                textOverlay.style.position = 'absolute';
                textOverlay.style.bottom = '20px';
                textOverlay.style.left = '0';
                textOverlay.style.right = '0';
                textOverlay.style.textAlign = 'center';
                textOverlay.style.color = 'white';
                textOverlay.style.fontSize = '18px';
                textOverlay.style.fontWeight = 'bold';
                textOverlay.style.padding = '10px';
                textOverlay.style.background = 'rgba(0,0,0,0.5)';
                textOverlay.textContent = story.text;
                mediaContainer.appendChild(textOverlay);
            }
            
            // Show viewer
            viewer.style.display = 'flex';
            
            // Start progress animation
            let progress = 0;
            const interval = setInterval(() => {
                progress += 1;
                progressFill.style.width = progress + '%';
                
                if (progress >= 100) {
                    clearInterval(interval);
                    closeStoryViewer();
                }
            }, 50); // 5 seconds total
            
            // Store interval for cleanup
            ZYLORB_STATE.storyInterval = interval;
        }

        function closeStoryViewer() {
            const viewer = document.getElementById('story-viewer');
            if (viewer) {
                viewer.style.display = 'none';
            }
            
            if (ZYLORB_STATE.storyInterval) {
                clearInterval(ZYLORB_STATE.storyInterval);
                ZYLORB_STATE.storyInterval = null;
            }
            
            ZYLORB_STATE.currentStory = null;
        }

        // Reels System
        function createReel(zone) {
            if (!ZYLORB_STATE.isLoggedIn) {
                showToast('Please sign in to create reels', 'error');
                return;
            }
            
            // For demo purposes, we'll simulate creating a reel
            const fileInput = document.createElement('input');
            fileInput.type = 'file';
            fileInput.accept = 'video/*';
            fileInput.onchange = (e) => {
                const file = e.target.files[0];
                if (file) {
                    const objectUrl = URL.createObjectURL(file);
                    
                    const newReel = {
                        id: Date.now(),
                        user: {
                            id: ZYLORB_STATE.currentUser.id,
                            name: ZYLORB_STATE.currentUser.name,
                            avatar: ZYLORB_STATE.currentUser.avatar,
                            color: getZoneColor(zone)
                        },
                        media: { type: 'video', url: objectUrl, file: file },
                        timestamp: 'Just now',
                        likes: 0,
                        comments: []
                    };
                    
                    // Add to reels array
                    if (!ZYLORB_STATE.reels[zone]) {
                        ZYLORB_STATE.reels[zone] = [];
                    }
                    ZYLORB_STATE.reels[zone].unshift(newReel);
                    
                    // Reload zone content
                    loadZoneContent(zone);
                    
                    showToast('Reel created successfully!', 'success');
                    
                    // Save to localStorage
                    saveToLocalStorage();
                }
            };
            fileInput.click();
        }

        function viewReel(reel, zone) {
            // For demo purposes, we'll show the reel in a modal
            const modal = document.createElement('div');
            modal.style.position = 'fixed';
            modal.style.top = '0';
            modal.style.left = '0';
            modal.style.width = '100%';
            modal.style.height = '100%';
            modal.style.background = 'rgba(0,0,0,0.9)';
            modal.style.zIndex = '1000';
            modal.style.display = 'flex';
            modal.style.alignItems = 'center';
            modal.style.justifyContent = 'center';
            
            modal.innerHTML = `
                <div style="position: relative; max-width: 400px; max-height: 80%;">
                    <video controls autoplay style="width: 100%; height: 100%; border-radius: 12px;">
                        <source src="${reel.media.url}" type="video/mp4">
                    </video>
                    <button style="position: absolute; top: 10px; right: 10px; background: rgba(0,0,0,0.7); color: white; border: none; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; cursor: pointer;" onclick="this.parentElement.parentElement.remove()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        // Chat System
        function showChat() {
            if (!ZYLORB_STATE.isLoggedIn) {
                showToast('Please sign in to use chat', 'error');
                return;
            }
            
            const chatSystem = document.getElementById('chat-system');
            chatSystem.style.display = 'flex';
            
            // Load chat messages
            loadChatMessages();
        }

        function hideChat() {
            const chatSystem = document.getElementById('chat-system');
            chatSystem.style.display = 'none';
        }

        function loadChatMessages() {
            const chatMessages = document.getElementById('chat-messages');
            if (!chatMessages) return;
            
            chatMessages.innerHTML = '';
            
            // For demo, create some sample messages
            const sampleMessages = [
                { text: 'Hey there! Welcome to ZYLORB!', sent: false, time: '2:30 PM' },
                { text: 'Thanks! This platform looks amazing!', sent: true, time: '2:31 PM' },
                { text: 'Let me know if you need any help getting started!', sent: false, time: '2:32 PM' }
            ];
            
            sampleMessages.forEach(msg => {
                const messageEl = document.createElement('div');
                messageEl.className = `message ${msg.sent ? 'sent' : 'received'}`;
                messageEl.innerHTML = `
                    <div>${msg.text}</div>
                    <div style="font-size: 10px; margin-top: 5px; opacity: 0.7;">${msg.time}</div>
                `;
                chatMessages.appendChild(messageEl);
            });
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function sendMessage() {
            const chatInput = document.getElementById('chat-input');
            const messageText = chatInput.value.trim();
            
            if (!messageText) {
                showToast('Please enter a message', 'error');
                return;
            }
            
            const chatMessages = document.getElementById('chat-messages');
            if (!chatMessages) return;
            
            // Create new message
            const messageEl = document.createElement('div');
            messageEl.className = 'message sent';
            const now = new Date();
            const time = `${now.getHours()}:${now.getMinutes().toString().padStart(2, '0')}`;
            
            messageEl.innerHTML = `
                <div>${messageText}</div>
                <div style="font-size: 10px; margin-top: 5px; opacity: 0.7;">${time}</div>
            `;
            
            chatMessages.appendChild(messageEl);
            chatInput.value = '';
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // Simulate reply after 1 second
            setTimeout(() => {
                const replyEl = document.createElement('div');
                replyEl.className = 'message received';
                const replies = [
                    'That sounds great!',
                    'I totally agree with you!',
                    'Let me know if you need any help!',
                    'This feature is amazing!'
                ];
                const randomReply = replies[Math.floor(Math.random() * replies.length)];
                
                replyEl.innerHTML = `
                    <div>${randomReply}</div>
                    <div style="font-size: 10px; margin-top: 5px; opacity: 0.7;">${time}</div>
                `;
                
                chatMessages.appendChild(replyEl);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }, 1000);
        }

        // Live Stream System
        function showLiveStreamModal() {
            if (!ZYLORB_STATE.isLoggedIn) {
                showToast('Please sign in to go live', 'error');
                return;
            }
            
            const modal = document.getElementById('live-stream-modal');
            modal.style.display = 'flex';
        }

        function hideLiveStreamModal() {
            const modal = document.getElementById('live-stream-modal');
            modal.style.display = 'none';
        }

        function startLiveStream() {
            const title = document.getElementById('stream-title').value.trim();
            const zone = document.getElementById('stream-zone').value;
            
            if (!title) {
                showToast('Please enter a stream title', 'error');
                return;
            }
            
            // Create new live stream
            const newStream = {
                id: Date.now(),
                user: {
                    id: ZYLORB_STATE.currentUser.id,
                    name: ZYLORB_STATE.currentUser.name,
                    avatar: ZYLORB_STATE.currentUser.avatar,
                    color: getZoneColor(zone)
                },
                title: title,
                zone: zone,
                viewers: 0,
                isLive: true,
                timestamp: 'Just now'
            };
            
            // Add to live streams array
            ZYLORB_STATE.liveStreams.unshift(newStream);
            
            // Hide modal
            hideLiveStreamModal();
            
            // Show success message
            showToast('Live stream started successfully!', 'success');
            
            // Real-time notification
            showRealTimeNotification('You are now live!');
            
            // Save to localStorage
            saveToLocalStorage();
        }

        // Share System
        function showShareModal(postId, zone) {
            if (!ZYLORB_STATE.isLoggedIn) {
                showToast('Please sign in to share posts', 'error');
                return;
            }
            
            const post = ZYLORB_STATE.posts[zone].find(p => p.id === postId);
            if (!post) return;
            
            const modal = document.getElementById('share-modal');
            const username = document.getElementById('share-username');
            const content = document.getElementById('share-content');
            const userAvatar = document.getElementById('share-user-avatar');
            
            if (username && content && userAvatar) {
                username.textContent = post.user.name;
                content.textContent = post.content.length > 50 ? post.content.substring(0, 50) + '...' : post.content;
                userAvatar.textContent = post.user.avatar;
                userAvatar.className = `user-avatar bg-gradient-to-r ${post.user.color}`;
            }
            
            // Store current post info for sharing
            ZYLORB_STATE.currentSharePost = { id: postId, zone: zone };
            
            modal.style.display = 'flex';
        }

        function hideShareModal() {
            const modal = document.getElementById('share-modal');
            modal.style.display = 'none';
        }

        function copyPostLink() {
            // In a real app, this would copy the actual post URL
            navigator.clipboard.writeText('https://zylorb.com/post/' + ZYLORB_STATE.currentSharePost.id)
                .then(() => {
                    showToast('Post link copied to clipboard!', 'success');
                    hideShareModal();
                })
                .catch(() => {
                    showToast('Failed to copy link', 'error');
                });
        }

        function shareToZone() {
            const message = document.getElementById('share-message').value.trim();
            const post = ZYLORB_STATE.posts[ZYLORB_STATE.currentSharePost.zone].find(p => p.id === ZYLORB_STATE.currentSharePost.id);
            
            if (post) {
                post.shares += 1;
                showToast('Post shared to your network!', 'success');
                hideShareModal();
                
                // Reload zone content to reflect the change
                loadZoneContent(ZYLORB_STATE.currentSharePost.zone);
                
                // Real-time notification for post owner
                if (post.user.id !== ZYLORB_STATE.currentUser.id) {
                    ZYLORB_STATE.notifications.push({
                        id: Date.now(),
                        type: 'share',
                        from: ZYLORB_STATE.currentUser.name,
                        postId: post.id,
                        zone: ZYLORB_STATE.currentSharePost.zone,
                        read: false,
                        timestamp: new Date().toISOString()
                    });
                    updateNotificationCount();
                }
                
                // Save to localStorage
                saveToLocalStorage();
            }
        }

        // Real-time Features
        function startRealTimeFeatures() {
            // Simulate real-time activity
            ZYLORB_STATE.realTimeInterval = setInterval(() => {
                // Random real-time notifications
                if (Math.random() > 0.7 && ZYLORB_STATE.isLoggedIn) {
                    const activities = [
                        'New post in Gaming Zone',
                        'Someone liked your post',
                        'New comment on your post',
                        'User started following you',
                        'Live stream starting soon'
                    ];
                    const randomActivity = activities[Math.floor(Math.random() * activities.length)];
                    showRealTimeNotification(randomActivity);
                    
                    // Add to notifications
                    ZYLORB_STATE.notifications.push({
                        id: Date.now(),
                        type: 'activity',
                        message: randomActivity,
                        read: false,
                        timestamp: new Date().toISOString()
                    });
                    updateNotificationCount();
                    
                    // Save to localStorage
                    saveToLocalStorage();
                }
                
                // Update online users count
                const onlineNow = document.getElementById('online-now');
                if (onlineNow) {
                    const baseCount = 124000;
                    const randomVariation = Math.floor(Math.random() * 1000) - 500;
                    onlineNow.textContent = (baseCount + randomVariation).toLocaleString() + '+';
                }
            }, 10000); // Every 10 seconds
        }

        function stopRealTimeFeatures() {
            if (ZYLORB_STATE.realTimeInterval) {
                clearInterval(ZYLORB_STATE.realTimeInterval);
                ZYLORB_STATE.realTimeInterval = null;
            }
        }
// ==================== REAL-TIME FEATURES ====================

// 1. TikTok-style Live Streaming System
let TIKTOK_LIVE_STATE = {
    mediaStream: null,
    isLive: false,
    viewers: 0,
    comments: [],
    reactions: []
};

async function startTikTokLive() {
    try {
        // Get camera access
        TIKTOK_LIVE_STATE.mediaStream = await navigator.mediaDevices.getUserMedia({
            video: { 
                width: { ideal: 1080 },
                height: { ideal: 1920 },
                facingMode: 'user'
            },
            audio: true
        });

        const videoElement = document.getElementById('tiktok-live-video');
        videoElement.srcObject = TIKTOK_LIVE_STATE.mediaStream;
        
        // Show live modal
        document.getElementById('tiktok-live-modal').classList.remove('hidden');
        TIKTOK_LIVE_STATE.isLive = true;
        
        // Start viewer simulation
        startViewerSimulation();
        
        // Start comment simulation
        startCommentSimulation();
        
        showToast('Live stream started!', 'success');
        
    } catch (error) {
        console.error('Live stream error:', error);
        showToast('Could not start live stream', 'error');
    }
}

function endTikTokLive() {
    if (TIKTOK_LIVE_STATE.mediaStream) {
        TIKTOK_LIVE_STATE.mediaStream.getTracks().forEach(track => track.stop());
    }
    
    document.getElementById('tiktok-live-modal').classList.add('hidden');
    TIKTOK_LIVE_STATE.isLive = false;
    showToast('Live stream ended', 'info');
}

function startViewerSimulation() {
    setInterval(() => {
        if (TIKTOK_LIVE_STATE.isLive) {
            const change = Math.floor(Math.random() * 10) - 3;
            TIKTOK_LIVE_STATE.viewers = Math.max(0, TIKTOK_LIVE_STATE.viewers + change);
            document.getElementById('live-viewers').textContent = TIKTOK_LIVE_STATE.viewers + ' viewers';
        }
    }, 3000);
}

function startCommentSimulation() {
    const sampleComments = [
        { user: 'Viewer1', text: 'Amazing stream! ðŸ”¥', time: 'just now' },
        { user: 'GamerPro', text: 'What game is this?', time: 'just now' },
        { user: 'Fan123', text: 'You are so talented!', time: 'just now' },
        { user: 'StreamLover', text: 'Following you now!', time: 'just now' }
    ];

    setInterval(() => {
        if (TIKTOK_LIVE_STATE.isLive && Math.random() > 0.5) {
            const randomComment = sampleComments[Math.floor(Math.random() * sampleComments.length)];
            addLiveComment(randomComment.user, randomComment.text);
        }
    }, 5000);
}

function addLiveComment(user, text) {
    const commentsContainer = document.getElementById('live-comments');
    const commentElement = document.createElement('div');
    commentElement.className = 'bg-white/10 rounded-lg p-3 animate-fade-in';
    commentElement.innerHTML = `
        <div class="text-white font-semibold">${user}</div>
        <div class="text-white/80">${text}</div>
        <div class="text-white/60 text-xs">just now</div>
    `;
    commentsContainer.appendChild(commentElement);
    commentsContainer.scrollTop = commentsContainer.scrollHeight;
}

function sendLiveComment() {
    const input = document.getElementById('live-comment-input');
    const text = input.value.trim();
    
    if (text && ZYLORB_STATE.currentUser) {
        addLiveComment(ZYLORB_STATE.currentUser.name, text);
        input.value = '';
    }
}

function sendLiveReaction(reaction) {
    if (TIKTOK_LIVE_STATE.isLive) {
        // Show reaction animation
        showReactionAnimation(reaction);
    }
}

function showReactionAnimation(reaction) {
    const container = document.getElementById('tiktok-live-modal');
    const reactionElement = document.createElement('div');
    reactionElement.className = 'reaction-animation';
    reactionElement.textContent = reaction;
    reactionElement.style.cssText = `
        position: absolute;
        bottom: 100px;
        right: 100px;
        font-size: 2rem;
        animation: floatUp 3s ease-in-out forwards;
    `;
    
    container.appendChild(reactionElement);
    
    setTimeout(() => {
        container.removeChild(reactionElement);
    }, 3000);
}

// Update header live button
function showRealLiveStream() {
    if (!ZYLORB_STATE.isLoggedIn) {
        showToast('Please sign in to go live', 'error');
        return;
    }
    startTikTokLive();
}

// 2. Instagram-style Reels System
let REELS_STATE = {
    currentReel: null,
    reels: [],
    currentIndex: 0,
    isMuted: true
};

// Load reels for zone
function loadInstagramReels(zone) {
    const reelsContainer = document.getElementById(`${zone}-reels-container`);
    if (!reelsContainer) return;
    
    reelsContainer.innerHTML = '';
    
    if (!ZYLORB_STATE.reels[zone] || ZYLORB_STATE.reels[zone].length === 0) {
        createSampleReelsForZone(zone);
    }
    
    if (ZYLORB_STATE.reels[zone] && ZYLORB_STATE.reels[zone].length > 0) {
        ZYLORB_STATE.reels[zone].forEach((reel, index) => {
            const reelElement = createInstagramReelElement(reel, zone, index);
            reelsContainer.appendChild(reelElement);
        });
    }
}

function createInstagramReelElement(reel, zone, index) {
    const reelEl = document.createElement('div');
    reelEl.className = 'reel cursor-pointer';
    reelEl.onclick = () => openInstagramReel(zone, index);
    
    const mediaUrl = reel.media && reel.media.url ? reel.media.url : 'https://assets.mixkit.co/videos/preview/mixkit-gamer-playing-a-video-game-44751-large.mp4';
    
    reelEl.innerHTML = `
        <div class="reel-video relative">
            <video muted class="w-full h-64 object-cover rounded-lg">
                <source src="${mediaUrl}" type="video/mp4">
            </video>
            <div class="absolute bottom-2 left-2 flex items-center space-x-1 text-white">
                <i class="fas fa-play"></i>
                <span class="text-sm">${reel.views || 0}</span>
            </div>
        </div>
        <div class="reel-username mt-2 text-white/80 text-sm">${reel.user?.name || 'User'}</div>
    `;
    
    return reelEl;
}

function openInstagramReel(zone, index) {
    const reels = ZYLORB_STATE.reels[zone];
    if (!reels || !reels[index]) return;
    
    REELS_STATE.currentReel = reels[index];
    REELS_STATE.currentIndex = index;
    
    const videoElement = document.getElementById('reel-video');
    const userAvatar = document.getElementById('reel-user-avatar');
    const username = document.getElementById('reel-username');
    const caption = document.getElementById('reel-caption');
    const likes = document.getElementById('reel-likes');
    const comments = document.getElementById('reel-comments');
    
    if (videoElement && REELS_STATE.currentReel.media) {
        videoElement.innerHTML = `<source src="${REELS_STATE.currentReel.media.url}" type="video/mp4">`;
        videoElement.muted = REELS_STATE.isMuted;
        videoElement.play();
    }
    
    if (userAvatar) userAvatar.textContent = REELS_STATE.currentReel.user?.avatar || 'U';
    if (username) username.textContent = REELS_STATE.currentReel.user?.name || 'User';
    if (caption) caption.textContent = REELS_STATE.currentReel.caption || 'Check out this amazing content!';
    if (likes) likes.textContent = REELS_STATE.currentReel.likes || 0;
    if (comments) comments.textContent = REELS_STATE.currentReel.comments?.length || 0;
    
    document.getElementById('instagram-reels').classList.remove('hidden');
}

function closeInstagramReel() {
    const videoElement = document.getElementById('reel-video');
    if (videoElement) {
        videoElement.pause();
    }
    document.getElementById('instagram-reels').classList.add('hidden');
}

function toggleReelSound() {
    const videoElement = document.getElementById('reel-video');
    const soundIcon = document.getElementById('sound-icon');
    
    if (videoElement) {
        REELS_STATE.isMuted = !REELS_STATE.isMuted;
        videoElement.muted = REELS_STATE.isMuted;
        
        if (soundIcon) {
            soundIcon.className = REELS_STATE.isMuted ? 'fas fa-volume-mute' : 'fas fa-volume-up';
        }
    }
}

function likeReel() {
    if (REELS_STATE.currentReel) {
        REELS_STATE.currentReel.likes = (REELS_STATE.currentReel.likes || 0) + 1;
        document.getElementById('reel-likes').textContent = REELS_STATE.currentReel.likes;
        showToast('Liked reel!', 'success');
    }
}

function addReelComment() {
    const input = document.getElementById('reel-comment-input');
    const text = input.value.trim();
    
    if (text && ZYLORB_STATE.currentUser && REELS_STATE.currentReel) {
        if (!REELS_STATE.currentReel.comments) {
            REELS_STATE.currentReel.comments = [];
        }
        
        REELS_STATE.currentReel.comments.push({
            user: ZYLORB_STATE.currentUser.name,
            text: text,
            time: 'just now'
        });
        
        document.getElementById('reel-comments').textContent = REELS_STATE.currentReel.comments.length;
        input.value = '';
        showToast('Comment added!', 'success');
    }
}

// Create reel with title requirement
function createReelWithTitle(zone) {
    if (!ZYLORB_STATE.isLoggedIn) {
        showToast('Please sign in to create reels', 'error');
        return;
    }
    
    const title = prompt('Enter reel title (required):');
    if (!title) {
        showToast('Reel title is required', 'error');
        return;
    }
    
    const fileInput = document.createElement('input');
    fileInput.type = 'file';
    fileInput.accept = 'video/*';
    fileInput.onchange = (e) => {
        const file = e.target.files[0];
        if (file) {
            const objectUrl = URL.createObjectURL(file);
            
            const newReel = {
                id: 'reel_' + Date.now(),
                user: {
                    id: ZYLORB_STATE.currentUser.id,
                    name: ZYLORB_STATE.currentUser.name,
                    avatar: ZYLORB_STATE.currentUser.avatar,
                    color: getZoneColor(zone)
                },
                media: { type: 'video', url: objectUrl, file: file },
                caption: title,
                likes: 0,
                comments: [],
                views: 0,
                timestamp: 'Just now'
            };
            
            if (!ZYLORB_STATE.reels[zone]) {
                ZYLORB_STATE.reels[zone] = [];
            }
            ZYLORB_STATE.reels[zone].unshift(newReel);
            saveToLocalStorage();
            loadInstagramReels(zone);
            showToast('Reel created successfully!', 'success');
        }
    };
    fileInput.click();
}

// 3. Real-time Profile Settings System
function showProfileSettings() {
    if (!ZYLORB_STATE.isLoggedIn) {
        showToast('Please sign in to access settings', 'error');
        return;
    }
    
    const modal = document.getElementById('profile-settings-modal');
    const nameInput = document.getElementById('settings-name');
    const emailInput = document.getElementById('settings-email');
    const bioInput = document.getElementById('settings-bio');
    const avatar = document.getElementById('settings-profile-avatar');
    const initial = document.getElementById('settings-profile-initial');
    
    if (ZYLORB_STATE.currentUser) {
        nameInput.value = ZYLORB_STATE.currentUser.name;
        emailInput.value = ZYLORB_STATE.currentUser.email;
        bioInput.value = ZYLORB_STATE.currentUser.bio || '';
        
        if (ZYLORB_STATE.currentUser.profilePic) {
            avatar.innerHTML = `<img src="${ZYLORB_STATE.currentUser.profilePic}" alt="Profile" class="w-full h-full rounded-full object-cover">`;
        } else {
            avatar.textContent = ZYLORB_STATE.currentUser.avatar;
            initial.textContent = ZYLORB_STATE.currentUser.avatar;
        }
    }
    
    modal.classList.remove('hidden');
}

function hideProfileSettings() {
    document.getElementById('profile-settings-modal').classList.add('hidden');
}

function updateProfilePicture(input) {
    const file = input.files[0];
    if (!file) return;
    
    if (!file.type.startsWith('image/')) {
        showToast('Please select an image file', 'error');
        return;
    }
    
    const objectUrl = URL.createObjectURL(file);
    const avatar = document.getElementById('settings-profile-avatar');
    
    avatar.innerHTML = `<img src="${objectUrl}" alt="Profile" class="w-full h-full rounded-full object-cover">`;
    
    // Save immediately
    ZYLORB_STATE.currentUser.profilePic = objectUrl;
    saveToLocalStorage();
    localStorage.setItem('zylorb_current_user', JSON.stringify(ZYLORB_STATE.currentUser));
    
    showToast('Profile picture updated!', 'success');
}

function saveProfileSettings() {
    console.log('Saving profile settings...');
    
    const nameInput = document.getElementById('settings-name');
    const emailInput = document.getElementById('settings-email');
    const bioInput = document.getElementById('settings-bio');
    
    if (!nameInput || !nameInput.value.trim()) {
        showToast('Please enter your name', 'error');
        return;
    }
    
    if (!ZYLORB_STATE.currentUser) {
        showToast('No user found. Please sign in again.', 'error');
        return;
    }
    
    // Update user data
    ZYLORB_STATE.currentUser.name = nameInput.value.trim();
    ZYLORB_STATE.currentUser.email = emailInput.value.trim();
    ZYLORB_STATE.currentUser.bio = bioInput.value.trim();
    ZYLORB_STATE.currentUser.avatar = nameInput.value.trim().charAt(0).toUpperCase();
    
    console.log('Updated user data:', ZYLORB_STATE.currentUser);
    
    // Update in users array
    const userIndex = ZYLORB_STATE.users.findIndex(u => u.id === ZYLORB_STATE.currentUser.id);
    if (userIndex !== -1) {
        ZYLORB_STATE.users[userIndex] = ZYLORB_STATE.currentUser;
    }
    
    // Save to storage
    saveToLocalStorage();
    localStorage.setItem('zylorb_current_user', JSON.stringify(ZYLORB_STATE.currentUser));
    
    console.log('Data saved to storage');
    
    // Update UI
    updateUIForLoggedInUser();
    
    // Hide modal
    hideProfileSettings();
    
    showToast('Profile settings saved successfully!', 'success');
    console.log('Profile settings saved successfully');
}

// 4. Real-time Zone Experience System
function initializeZoneExperience(zone) {
    console.log(`Initializing real-time experience for ${zone} zone`);
    
    // Load real-time content
    loadRealTimeZoneContent(zone);
    
    // Start real-time updates
    startZoneRealTimeUpdates(zone);
    
    // Initialize zone-specific features
    initializeZoneSpecificFeatures(zone);
}

function loadRealTimeZoneContent(zone) {
    // Load posts
    loadZoneContent(zone);
    
    // Load reels
    loadInstagramReels(zone);
    
    // Load stories
    loadStories(zone);
    
    // Load live streams
    loadLiveStreams(zone);
}

function startZoneRealTimeUpdates(zone) {
    // Simulate real-time activity in zone
    setInterval(() => {
        if (ZYLORB_STATE.currentZone === zone && Math.random() > 0.8) {
            simulateZoneActivity(zone);
        }
    }, 10000);
}

function simulateZoneActivity(zone) {
    const activities = {
        gaming: ['New gaming clip uploaded', 'Tournament starting soon', 'Pro player joined the zone'],
        life: ['User shared daily vlog', 'New cooking recipe added', 'Travel diary updated'],
        culture: ['Cultural event announced', 'Traditional art shared', 'Festival celebration posted'],
        professional: ['Job opportunity posted', 'Industry insights shared', 'Networking event announced']
    };
    
    const randomActivity = activities[zone][Math.floor(Math.random() * activities[zone].length)];
    showRealTimeNotification(`${randomActivity} in ${zone} zone`);
}

function initializeZoneSpecificFeatures(zone) {
    switch(zone) {
        case 'gaming':
            initializeGamingFeatures();
            break;
        case 'life':
            initializeLifeFeatures();
            break;
        case 'culture':
            initializeCultureFeatures();
            break;
        case 'professional':
            initializeProfessionalFeatures();
            break;
    }
}

function initializeGamingFeatures() {
    // Gaming-specific features
    console.log('Initializing gaming features...');
}

function initializeLifeFeatures() {
    // Life-specific features
    console.log('Initializing life features...');
}

function initializeCultureFeatures() {
    // Culture-specific features
    console.log('Initializing culture features...');
}

function initializeProfessionalFeatures() {
    // Professional-specific features
    console.log('Initializing professional features...');
}

// Update enterZone function
function enterZone(zone) {
    if (!ZYLORB_STATE.isLoggedIn) {
        showToast('Please sign in to enter zones', 'error');
        showAuthModal('signin');
        return;
    }
    
    ZYLORB_STATE.currentZone = zone;
    
    // Hide main content
    document.getElementById('main-content').classList.add('hidden');
    
    // Show zone page
    const zonePage = document.getElementById(`${zone}-zone-page`);
    zonePage.classList.remove('hidden');
    
    // Initialize real-time zone experience
    initializeZoneExperience(zone);
    
    showToast(`Entering ${zone} zone...`, 'success');
}

// Update settings button in user menu
function showSettings() {
    showProfileSettings();
}

// Update live button in header
function showLiveStreamModal() {
    showRealLiveStream();
}

// ==================== END REAL-TIME FEATURES ====================
        // Utility Functions
        function getZoneColor(zone) {
            switch(zone) {
                case 'gaming': return 'from-purple-500 to-pink-500';
                case 'life': return 'from-pink-500 to-rose-500';
                case 'culture': return 'from-cyan-500 to-blue-500';
                case 'professional': return 'from-orange-500 to-red-500';
                default: return 'from-gray-500 to-gray-700';
            }
        }

        function getRandomColor() {
            const colors = [
                'from-blue-500 to-cyan-500',
                'from-green-500 to-teal-500',
                'from-purple-500 to-pink-500',
                'from-orange-500 to-red-500',
                'from-cyan-500 to-blue-500'
            ];
            return colors[Math.floor(Math.random() * colors.length)];
        }

        // Scroll to features
        function scrollToFeatures() {
            document.getElementById('features').scrollIntoView({ 
                behavior: 'smooth' 
            });
        }

        // Initialize systems
       function initializeAuthSystem() {
    // Set up auth form submission
    const authForm = document.getElementById('auth-form');
    if (authForm) {
        authForm.addEventListener('submit', handleAuthSubmit);
    }
    
    // Set up auth mode switching
    setTimeout(() => {
        const switchLink = document.getElementById('auth-switch-link');
        if (switchLink) {
            switchLink.addEventListener('click', function(e) {
                e.preventDefault();
                const newMode = ZYLORB_STATE.authMode === 'signup' ? 'signin' : 'signup';
                showAuthModal(newMode);
            });
        }
    }, 500);
    
    console.log('ðŸ” Auth System Initialized');
}

        function initializeZoneSystem() {
            console.log('ðŸŽ® Zone System Initialized');
        }

        function initializePostSystem() {
            console.log('ðŸ“ Post System Initialized');
        }

        function initializeStorySystem() {
            console.log('ðŸ“± Story System Initialized');
        }

      function initializeReelsSystem() {
    console.log('ðŸŽ¬ Reels System Initialized');
    
    // Create sample reels for all zones only if function exists
    if (typeof createSampleReelsForZone === 'function') {
        const zones = ['gaming', 'life', 'culture', 'professional'];
        zones.forEach(zone => {
            if (!ZYLORB_STATE.reels[zone] || ZYLORB_STATE.reels[zone].length === 0) {
                createSampleReelsForZone(zone);
            }
        });
    } else {
        console.warn('createSampleReelsForZone function not available');
    }
}
        function initializeChatSystem() {
            console.log('ðŸ’¬ Chat System Initialized');
        }

        function initializeLiveStreamSystem() {
            console.log('ðŸ“¡ Live Stream System Initialized');
        }

        function initializeRealTimeFeatures() {
            console.log('âš¡ Real-time Features Initialized');
        }

    </script>
    <!-- Add these new pages and systems right before the closing </body> tag -->

<!-- REAL-TIME NOTIFICATIONS PAGE -->
<div id="notifications-page" class="hidden fixed inset-0 bg-black/90 backdrop-blur-md z-50 overflow-y-auto">
    <div class="min-h-screen">
        <div class="zone-header">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-4">
                        <button class="btn-secondary" onclick="hideNotificationsPage()">
                            <i class="fas fa-arrow-left mr-2"></i>Back
                        </button>
                        <div>
                            <h1 class="text-3xl font-bold text-white">Notifications</h1>
                            <p class="text-white/60">Your recent activities</p>
                        </div>
                    </div>
                    <button class="btn-secondary" onclick="markAllNotificationsAsRead()">
                        <i class="fas fa-check-double mr-2"></i>Mark All Read
                    </button>
                </div>
            </div>
        </div>

        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div id="notifications-list">
                <!-- Notifications will be loaded here -->
            </div>
        </div>
    </div>
</div>

<!-- COMMUNITY GUIDELINES PAGE -->
<div id="community-page" class="hidden fixed inset-0 bg-black/90 backdrop-blur-md z-50 overflow-y-auto">
    <div class="min-h-screen">
        <div class="zone-header">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-4">
                        <button class="btn-secondary" onclick="hideCommunityPage()">
                            <i class="fas fa-arrow-left mr-2"></i>Back
                        </button>
                        <div>
                            <h1 class="text-3xl font-bold text-white">Community Guidelines</h1>
                            <p class="text-white/60">Keep our community safe and friendly</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="glass rounded-2xl p-8 mb-6">
                <h2 class="text-2xl font-bold text-white mb-6">ZYLORB Community Standards</h2>
                
                <div class="space-y-6">
                    <div class="flex items-start space-x-4">
                        <div class="w-12 h-12 bg-red-500/20 rounded-xl flex items-center justify-center">
                            <i class="fas fa-ban text-red-400 text-xl"></i>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold text-white mb-2">No Illegal Activities</h3>
                            <p class="text-white/80">Users must not engage in or promote any illegal activities on this platform. This includes but is not limited to fraud, harassment, threats, or any activity that violates local, state, or federal laws.</p>
                        </div>
                    </div>

                    <div class="flex items-start space-x-4">
                        <div class="w-12 h-12 bg-purple-500/20 rounded-xl flex items-center justify-center">
                            <i class="fas fa-exclamation-triangle text-purple-400 text-xl"></i>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold text-white mb-2">No Adult or Sexual Content</h3>
                            <p class="text-white/80">Posting, sharing, or promoting adult content, pornography, or sexually explicit material is strictly prohibited. This platform is designed to be safe for users of all ages.</p>
                        </div>
                    </div>

                    <div class="flex items-start space-x-4">
                        <div class="w-12 h-12 bg-orange-500/20 rounded-xl flex items-center justify-center">
                            <i class="fas fa-comment-slash text-orange-400 text-xl"></i>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold text-white mb-2">No Hate Speech</h3>
                            <p class="text-white/80">Hate speech, discrimination, or attacks against individuals or groups based on race, ethnicity, religion, gender, sexual orientation, or any other protected characteristic will not be tolerated.</p>
                        </div>
                    </div>

                    <div class="flex items-start space-x-4">
                        <div class="w-12 h-12 bg-green-500/20 rounded-xl flex items-center justify-center">
                            <i class="fas fa-heart text-green-400 text-xl"></i>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold text-white mb-2">Friendly Environment</h3>
                            <p class="text-white/80">This platform is designed to be helpful and friendly for everyone. Please treat all users with respect and kindness. Bullying, harassment, or any form of abusive behavior will result in account suspension.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ABOUT PAGE -->
<div id="about-page" class="hidden fixed inset-0 bg-black/90 backdrop-blur-md z-50 overflow-y-auto">
    <div class="min-h-screen">
        <div class="zone-header">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-4">
                        <button class="btn-secondary" onclick="hideAboutPage()">
                            <i class="fas fa-arrow-left mr-2"></i>Back
                        </button>
                        <div>
                            <h1 class="text-3xl font-bold text-white">About ZYLORB</h1>
                            <p class="text-white/60">The Future of Social Media</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="glass rounded-2xl p-8 mb-6 text-center">
                <div class="w-32 h-32 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-6">
                    <i class="fas fa-crown text-white text-4xl"></i>
                </div>
                <h2 class="text-3xl font-bold text-white mb-2">Muhammad Arda</h2>
                <p class="text-xl text-white/80 mb-4">Founder & CEO</p>
                <div class="flex justify-center space-x-4 mb-6">
                    <span class="bg-purple-500/20 text-purple-300 px-3 py-1 rounded-full text-sm">19 Years Old</span>
                    <span class="bg-blue-500/20 text-blue-300 px-3 py-1 rounded-full text-sm">Data Science Student</span>
                    <span class="bg-green-500/20 text-green-300 px-3 py-1 rounded-full text-sm">Visionary</span>
                </div>
            </div>

            <div class="grid md:grid-cols-2 gap-6">
                <div class="glass rounded-2xl p-6">
                    <h3 class="text-xl font-bold text-white mb-4">The Vision</h3>
                    <p class="text-white/80">ZYLORB was built for the next generation - a platform where users can express different aspects of their lives in dedicated spaces. Unlike traditional social media that mixes everything together, ZYLORB's unique 4-zone system allows for more meaningful connections and content discovery.</p>
                </div>

                <div class="glass rounded-2xl p-6">
                    <h3 class="text-xl font-bold text-white mb-4">The Mission</h3>
                    <p class="text-white/80">To create a safe, innovative, and engaging social media experience that respects user privacy while fostering genuine connections across different interests and communities. ZYLORB represents the future of how people connect and share online.</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- REAL LIVE STREAM MODAL -->
<div id="real-live-stream-modal" class="hidden fixed inset-0 bg-black/90 backdrop-blur-md z-50">
    <div class="min-h-screen flex items-center justify-center p-4">
        <div class="glass rounded-2xl p-6 max-w-4xl w-full">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-2xl font-bold text-white">Go Live - Real Stream</h3>
                <button class="text-white/60 hover:text-white" onclick="hideRealLiveStream()">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>

            <div class="live-stream-container mb-6">
                <video id="real-live-video" autoplay muted class="live-stream-video"></video>
                <div class="live-viewers-count">
                    <i class="fas fa-eye"></i>
                    <span id="live-viewers-count">0</span> viewers
                </div>
                <div class="live-stream-controls">
                    <button class="live-control-btn" id="toggle-camera-btn" onclick="toggleCamera()">
                        <i class="fas fa-video"></i>
                    </button>
                    <button class="live-control-btn" id="toggle-mic-btn" onclick="toggleMicrophone()">
                        <i class="fas fa-microphone"></i>
                    </button>
                    <button class="live-control-btn end-live" onclick="endRealLiveStream()">
                        <i class="fas fa-stop"></i>
                    </button>
                </div>
            </div>

            <div class="space-y-4">
                <div>
                    <label class="block text-white/80 mb-2">Stream Title</label>
                    <input type="text" class="w-full bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-purple-500" 
                           placeholder="Enter your stream title" id="real-stream-title">
                </div>
                
                <div>
                    <label class="block text-white/80 mb-2">Zone</label>
                    <select class="w-full bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-purple-500" 
                            id="real-stream-zone">
                        <option value="gaming">Gaming Zone</option>
                        <option value="life">Life Zone</option>
                        <option value="culture">Culture Zone</option>
                        <option value="professional">Professional Zone</option>
                    </select>
                </div>
                
                <div class="flex gap-4">
                    <button class="btn-secondary flex-1" onclick="hideRealLiveStream()">Cancel</button>
                    <button class="btn-primary flex-1" onclick="startRealLiveStream()" id="start-real-live-btn">
                        <i class="fas fa-broadcast-tower mr-2"></i>Go Live
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// ðŸš€ REAL-TIME FEATURES IMPLEMENTATION
// Adding all 5 requested features without breaking existing functionality

// 1. PERMANENT POSTS SYSTEM
const PERMANENT_STORAGE = {
    // Initialize permanent posts from localStorage
    posts: JSON.parse(localStorage.getItem('zylorb_permanent_posts')) || {
        gaming: [],
        life: [],
        culture: [],
        professional: []
    },
    
    // Real-time notifications storage
    notifications: JSON.parse(localStorage.getItem('zylorb_notifications')) || [],
    
    // Active live streams storage
    activeLiveStreams: JSON.parse(localStorage.getItem('zylorb_live_streams')) || []
};

// Initialize permanent posts when platform loads
function initializePermanentPosts() {
    console.log('ðŸ“ Initializing Permanent Posts System...');
    
    // Merge permanent posts with current session
    Object.keys(ZYLORB_STATE.posts).forEach(zone => {
        if (PERMANENT_STORAGE.posts[zone]) {
            // Add permanent posts that don't exist in current session
            PERMANENT_STORAGE.posts[zone].forEach(permanentPost => {
                const exists = ZYLORB_STATE.posts[zone].some(post => post.id === permanentPost.id);
                if (!exists) {
                    ZYLORB_STATE.posts[zone].push(permanentPost);
                }
            });
        }
    });
    
    // Auto-save posts every 30 seconds
    setInterval(savePermanentPosts, 30000);
    
    console.log('âœ… Permanent Posts System Ready');
}

function savePermanentPosts() {
    // Save all current posts to permanent storage
    Object.keys(ZYLORB_STATE.posts).forEach(zone => {
        PERMANENT_STORAGE.posts[zone] = ZYLORB_STATE.posts[zone];
    });
    localStorage.setItem('zylorb_permanent_posts', JSON.stringify(PERMANENT_STORAGE.posts));
}

// Override post creation to make posts permanent
const originalCreateNewPost = window.createNewPost;
window.createNewPost = function(zone) {
    const content = document.getElementById(`${zone}-post-input`).value.trim();
    
    if (!content && !ZYLORB_STATE.currentMedia[zone]) {
        showToast('Please enter some content or add media for your post', 'error');
        return;
    }
    
    // Create post with permanent ID
    const newPost = {
        id: 'perm_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9),
        user: {
            id: ZYLORB_STATE.currentUser.id,
            name: ZYLORB_STATE.currentUser.name,
            avatar: ZYLORB_STATE.currentUser.avatar,
            color: getZoneColor(zone)
        },
        content: content,
        media: ZYLORB_STATE.currentMedia[zone],
        timestamp: new Date().toLocaleString(),
        likes: 0,
        comments: [],
        shares: 0,
        liked: false,
        isPermanent: true
    };
    
    // Add to current session
    if (!ZYLORB_STATE.posts[zone]) {
        ZYLORB_STATE.posts[zone] = [];
    }
    ZYLORB_STATE.posts[zone].unshift(newPost);
    
    // Save to permanent storage
    savePermanentPosts();
    
    // Clear input and media
    document.getElementById(`${zone}-post-input`).value = '';
    removeMediaPreview(zone);
    
    // Reload zone content
    loadZoneContent(zone);
    
    showToast('Post created permanently!', 'success');
    
    // Create notification
    createNotification('post_created', `You created a new post in ${zone} zone`);
};

// 2. REAL LIVE STREAM SYSTEM
let REAL_LIVE_STATE = {
    mediaStream: null,
    isStreaming: false,
    currentStream: null,
    viewerCount: 0
};

function showRealLiveStream() {
    if (!ZYLORB_STATE.isLoggedIn) {
        showToast('Please sign in to go live', 'error');
        return;
    }
    
    const modal = document.getElementById('real-live-stream-modal');
    modal.classList.remove('hidden');
    
    // Initialize camera
    initializeCamera();
}

function hideRealLiveStream() {
    const modal = document.getElementById('real-live-stream-modal');
    modal.classList.add('hidden');
    
    if (!REAL_LIVE_STATE.isStreaming) {
        stopCamera();
    }
}

async function initializeCamera() {
    try {
        REAL_LIVE_STATE.mediaStream = await navigator.mediaDevices.getUserMedia({
            video: true,
            audio: true
        });
        
        const videoElement = document.getElementById('real-live-video');
        videoElement.srcObject = REAL_LIVE_STATE.mediaStream;
        
        document.getElementById('start-real-live-btn').disabled = false;
        showToast('Camera activated! Ready to go live.', 'success');
        
    } catch (error) {
        console.error('Camera error:', error);
        showToast('Could not access camera. Please check permissions.', 'error');
    }
}

function toggleCamera() {
    if (REAL_LIVE_STATE.mediaStream) {
        const videoTracks = REAL_LIVE_STATE.mediaStream.getVideoTracks();
        videoTracks.forEach(track => {
            track.enabled = !track.enabled;
        });
        showToast(track.enabled ? 'Camera on' : 'Camera off', 'info');
    }
}

function toggleMicrophone() {
    if (REAL_LIVE_STATE.mediaStream) {
        const audioTracks = REAL_LIVE_STATE.mediaStream.getAudioTracks();
        audioTracks.forEach(track => {
            track.enabled = !track.enabled;
        });
        showToast(track.enabled ? 'Microphone on' : 'Microphone off', 'info');
    }
}

function stopCamera() {
    if (REAL_LIVE_STATE.mediaStream) {
        REAL_LIVE_STATE.mediaStream.getTracks().forEach(track => track.stop());
        REAL_LIVE_STATE.mediaStream = null;
    }
}

function startRealLiveStream() {
    const title = document.getElementById('real-stream-title').value.trim();
    const zone = document.getElementById('real-stream-zone').value;
    
    if (!title) {
        showToast('Please enter a stream title', 'error');
        return;
    }
    
    if (!REAL_LIVE_STATE.mediaStream) {
        showToast('Camera not available', 'error');
        return;
    }
    
    REAL_LIVE_STATE.isStreaming = true;
    REAL_LIVE_STATE.currentStream = {
        id: 'live_' + Date.now(),
        user: ZYLORB_STATE.currentUser,
        title: title,
        zone: zone,
        startTime: new Date().toISOString(),
        viewers: 0
    };
    
    // Add to active streams
    PERMANENT_STORAGE.activeLiveStreams.push(REAL_LIVE_STATE.currentStream);
    localStorage.setItem('zylorb_live_streams', JSON.stringify(PERMANENT_STORAGE.activeLiveStreams));
    
    // Start viewer simulation
    startViewerSimulation();
    
    showToast('Live stream started!', 'success');
    createNotification('live_started', `You started a live stream: ${title}`);
    
    // Update UI
    document.getElementById('start-real-live-btn').style.display = 'none';
}

function endRealLiveStream() {
    if (REAL_LIVE_STATE.isStreaming) {
        REAL_LIVE_STATE.isStreaming = false;
        
        // Remove from active streams
        PERMANENT_STORAGE.activeLiveStreams = PERMANENT_STORAGE.activeLiveStreams.filter(
            stream => stream.id !== REAL_LIVE_STATE.currentStream.id
        );
        localStorage.setItem('zylorb_live_streams', JSON.stringify(PERMANENT_STORAGE.activeLiveStreams));
        
        stopCamera();
        hideRealLiveStream();
        
        showToast('Live stream ended', 'info');
        createNotification('live_ended', 'Your live stream has ended');
    }
}

function startViewerSimulation() {
    setInterval(() => {
        if (REAL_LIVE_STATE.isStreaming) {
            const change = Math.floor(Math.random() * 5) - 2;
            REAL_LIVE_STATE.viewerCount = Math.max(0, REAL_LIVE_STATE.viewerCount + change);
            document.getElementById('live-viewers-count').textContent = REAL_LIVE_STATE.viewerCount;
        }
    }, 3000);
}

// 3. REAL-TIME NOTIFICATION SYSTEM
function initializeNotificationSystem() {
    console.log('ðŸ”” Initializing Notification System...');
    
    // Load existing notifications
    updateNotificationBadges();
    
    // Simulate real-time notifications
    setInterval(() => {
        if (ZYLORB_STATE.isLoggedIn && Math.random() > 0.7) {
            simulateRandomNotification();
        }
    }, 15000);
    
    console.log('âœ… Notification System Ready');
}

function createNotification(type, message, relatedId = null) {
    const newNotification = {
        id: 'notif_' + Date.now(),
        type: type,
        message: message,
        timestamp: new Date().toISOString(),
        read: false,
        relatedId: relatedId
    };
    
    PERMANENT_STORAGE.notifications.unshift(newNotification);
    
    // Keep only last 100 notifications
    if (PERMANENT_STORAGE.notifications.length > 100) {
        PERMANENT_STORAGE.notifications.pop();
    }
    
    localStorage.setItem('zylorb_notifications', JSON.stringify(PERMANENT_STORAGE.notifications));
    updateNotificationBadges();
    
    // Show real-time alert
    showRealTimeNotification(message);
    
    return newNotification;
}

function simulateRandomNotification() {
    const notifications = [
        { type: 'like', message: 'Someone liked your recent post' },
        { type: 'comment', message: 'New comment on your gaming clip' },
        { type: 'follow', message: 'You have a new follower' },
        { type: 'live', message: 'Your friend just started a live stream' },
        { type: 'mention', message: 'You were mentioned in a post' }
    ];
    
    const randomNotif = notifications[Math.floor(Math.random() * notifications.length)];
    createNotification(randomNotif.type, randomNotif.message);
}

function updateNotificationBadges() {
    const unreadCount = PERMANENT_STORAGE.notifications.filter(n => !n.read).length;
    const badge = document.getElementById('header-notification-count');
    
    if (badge) {
        badge.textContent = unreadCount > 0 ? unreadCount : '';
        badge.style.display = unreadCount > 0 ? 'flex' : 'none';
    }
}

function showNotificationsPage() {
    if (!ZYLORB_STATE.isLoggedIn) {
        showToast('Please sign in to view notifications', 'error');
        return;
    }
    
    const page = document.getElementById('notifications-page');
    page.classList.remove('hidden');
    
    loadNotifications();
}

function hideNotificationsPage() {
    const page = document.getElementById('notifications-page');
    page.classList.add('hidden');
}

function loadNotifications() {
    const container = document.getElementById('notifications-list');
    if (!container) return;
    
    container.innerHTML = '';
    
    if (PERMANENT_STORAGE.notifications.length === 0) {
        container.innerHTML = `
            <div class="text-center py-12">
                <i class="fas fa-bell-slash text-4xl text-white/40 mb-4"></i>
                <h3 class="text-xl font-bold text-white mb-2">No notifications yet</h3>
                <p class="text-white/60">Your notifications will appear here</p>
            </div>
        `;
        return;
    }
    
    PERMANENT_STORAGE.notifications.forEach(notification => {
        const notifElement = createNotificationElement(notification);
        container.appendChild(notifElement);
    });
}

function createNotificationElement(notification) {
    const element = document.createElement('div');
    element.className = `post-card ${notification.read ? '' : 'border-l-4 border-l-purple-500'}`;
    element.innerHTML = `
        <div class="flex items-start space-x-4">
            <div class="user-avatar ${getNotificationIcon(notification.type)}">
                <i class="${getNotificationIconClass(notification.type)}"></i>
            </div>
            <div class="flex-1">
                <p class="text-white/90 mb-2">${notification.message}</p>
                <div class="flex items-center justify-between">
                    <span class="text-white/60 text-sm">${formatTime(notification.timestamp)}</span>
                    ${!notification.read ? `
                        <button class="text-purple-400 text-sm hover:text-purple-300" onclick="markNotificationAsRead('${notification.id}')">
                            Mark as read
                        </button>
                    ` : ''}
                </div>
            </div>
        </div>
    `;
    
    return element;
}

function getNotificationIcon(type) {
    const icons = {
        like: 'bg-gradient-to-r from-red-500 to-pink-500',
        comment: 'bg-gradient-to-r from-blue-500 to-cyan-500',
        follow: 'bg-gradient-to-r from-green-500 to-teal-500',
        live: 'bg-gradient-to-r from-orange-500 to-red-500',
        mention: 'bg-gradient-to-r from-purple-500 to-indigo-500',
        post_created: 'bg-gradient-to-r from-purple-500 to-pink-500'
    };
    return icons[type] || 'bg-gradient-to-r from-gray-500 to-gray-700';
}

function getNotificationIconClass(type) {
    const classes = {
        like: 'fas fa-heart',
        comment: 'fas fa-comment',
        follow: 'fas fa-user-plus',
        live: 'fas fa-broadcast-tower',
        mention: 'fas fa-at',
        post_created: 'fas fa-plus'
    };
    return classes[type] || 'fas fa-bell';
}

function markNotificationAsRead(notificationId) {
    const notification = PERMANENT_STORAGE.notifications.find(n => n.id === notificationId);
    if (notification) {
        notification.read = true;
        localStorage.setItem('zylorb_notifications', JSON.stringify(PERMANENT_STORAGE.notifications));
        loadNotifications();
        updateNotificationBadges();
    }
}

function markAllNotificationsAsRead() {
    PERMANENT_STORAGE.notifications.forEach(notification => {
        notification.read = true;
    });
    localStorage.setItem('zylorb_notifications', JSON.stringify(PERMANENT_STORAGE.notifications));
    loadNotifications();
    updateNotificationBadges();
    showToast('All notifications marked as read', 'success');
}

// 4. COMMUNITY GUIDELINES PAGE
function showCommunityPage() {
    const page = document.getElementById('community-page');
    page.classList.remove('hidden');
}

function hideCommunityPage() {
    const page = document.getElementById('community-page');
    page.classList.add('hidden');
}

// 5. ABOUT PAGE
function showAboutPage() {
    const page = document.getElementById('about-page');
    page.classList.remove('hidden');
}

function hideAboutPage() {
    const page = document.getElementById('about-page');
    page.classList.add('hidden');
}

// UTILITY FUNCTIONS
function formatTime(timestamp) {
    const now = new Date();
    const time = new Date(timestamp);
    const diffMs = now - time;
    const diffMins = Math.floor(diffMs / 60000);
    const diffHours = Math.floor(diffMs / 3600000);
    const diffDays = Math.floor(diffMs / 86400000);
    
    if (diffMins < 1) return 'Just now';
    if (diffMins < 60) return `${diffMins}m ago`;
    if (diffHours < 24) return `${diffHours}h ago`;
    if (diffDays < 7) return `${diffDays}d ago`;
    
    return time.toLocaleDateString();
}

// Update header to include notifications button
document.addEventListener('DOMContentLoaded', function() {
    // Add notifications button to user menu
    const userMenu = document.getElementById('user-menu');
    if (userMenu) {
        const notificationsItem = document.createElement('div');
        notificationsItem.className = 'user-menu-item';
        notificationsItem.innerHTML = `
            <i class="fas fa-bell mr-2"></i>Notifications
            <span class="ml-auto bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center" id="menu-notification-count">0</span>
        `;
        notificationsItem.onclick = showNotificationsPage;
        
        // Insert after profile item
        const profileItem = userMenu.querySelector('.user-menu-item');
        profileItem.parentNode.insertBefore(notificationsItem, profileItem.nextSibling);
    }
    
    // Update navigation links
    const communityLink = document.querySelector('a[href="#community"]');
    const aboutLink = document.querySelector('a[href="#about"]');
    
    if (communityLink) {
        communityLink.onclick = function(e) {
            e.preventDefault();
            showCommunityPage();
        };
    }
    
    if (aboutLink) {
        aboutLink.onclick = function(e) {
            e.preventDefault();
            showAboutPage();
        };
    }
    
    // Update mobile menu links
    const mobileCommunityLink = document.querySelector('#mobile-menu a[href="#community"]');
    const mobileAboutLink = document.querySelector('#mobile-menu a[href="#about"]');
    
    if (mobileCommunityLink) {
        mobileCommunityLink.onclick = function(e) {
            e.preventDefault();
            showCommunityPage();
            toggleMobileMenu();
        };
    }
    
    if (mobileAboutLink) {
        mobileAboutLink.onclick = function(e) {
            e.preventDefault();
            showAboutPage();
            toggleMobileMenu();
        };
    }
    
    // Replace old live stream button with real one
    const oldLiveButton = document.querySelector('button[onclick="showLiveStreamModal()"]');
    if (oldLiveButton) {
        oldLiveButton.onclick = showRealLiveStream;
    }
    
    // Initialize real-time systems
    setTimeout(() => {
        initializePermanentPosts();
        initializeNotificationSystem();
        console.log('ðŸš€ All Real-time Features Initialized');
    }, 2000);
});

// Update notification badges in real-time
function updateAllNotificationBadges() {
    updateNotificationBadges();
    
    const menuBadge = document.getElementById('menu-notification-count');
    if (menuBadge) {
        const unreadCount = PERMANENT_STORAGE.notifications.filter(n => !n.read).length;
        menuBadge.textContent = unreadCount > 0 ? unreadCount : '';
        menuBadge.style.display = unreadCount > 0 ? 'flex' : 'none';
    }
}

// Enhanced real-time notification display
function showEnhancedRealTimeNotification(message) {
    showRealTimeNotification(message);
    
    // Also create a permanent notification
    createNotification('activity', message);
}

// Override existing functions to create notifications
const originalToggleLike = window.toggleLike;
window.toggleLike = function(postId, zone) {
    originalToggleLike(postId, zone);
    
    const post = ZYLORB_STATE.posts[zone].find(p => p.id === postId);
    if (post && post.liked && post.user.id !== ZYLORB_STATE.currentUser.id) {
        createNotification('like', `${ZYLORB_STATE.currentUser.name} liked your post`);
    }
};

const originalAddComment = window.addComment;
window.addComment = function(postId, zone) {
    originalAddComment(postId, zone);
    
    const post = ZYLORB_STATE.posts[zone].find(p => p.id === postId);
    if (post && post.user.id !== ZYLORB_STATE.currentUser.id) {
        createNotification('comment', `${ZYLORB_STATE.currentUser.name} commented on your post`);
    }
};

console.log('ðŸŽ¯ Real-time Features Loaded: Permanent Posts, Live Streaming, Notifications, Community Guidelines, About Page');
</script>

<style>
/* Additional styles for real-time features */
.live-stream-container {
    position: relative;
    width: 100%;
    height: 400px;
    background: #000;
    border-radius: 12px;
    overflow: hidden;
    margin-bottom: 20px;
}

.live-stream-video {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.live-viewers-count {
    position: absolute;
    top: 15px;
    left: 15px;
    background: rgba(0, 0, 0, 0.7);
    color: white;
    padding: 8px 12px;
    border-radius: 20px;
    font-size: 14px;
    display: flex;
    align-items: center;
    gap: 5px;
}

.live-stream-controls {
    position: absolute;
    bottom: 20px;
    left: 0;
    right: 0;
    display: flex;
    justify-content: center;
    gap: 15px;
}

.live-control-btn {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(0, 0, 0, 0.7);
    color: white;
    border: none;
    cursor: pointer;
    font-size: 20px;
    transition: all 0.3s ease;
}

.live-control-btn:hover {
    background: rgba(0, 0, 0, 0.9);
    transform: scale(1.1);
}

.live-control-btn.end-live {
    background: #ef4444;
}

.live-control-btn.end-live:hover {
    background: #dc2626;
}

/* Notification styles */
.notification-item {
    border-left: 4px solid transparent;
}

.notification-item.unread {
    border-left-color: #8b5cf6;
    background: rgba(139, 92, 246, 0.05);
}

/* Community guidelines styles */
.guideline-item {
    transition: transform 0.2s ease;
}

.guideline-item:hover {
    transform: translateX(5px);
}

/* About page styles */
.owner-avatar {
    transition: transform 0.3s ease;
}

.owner-avatar:hover {
    transform: scale(1.05);
}
</style>
</body>
</html>
